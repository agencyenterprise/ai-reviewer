{
  "created": 1759268003.1291761,
  "duration": 809.7629511356354,
  "exitcode": 1,
  "root": "/Users/ricardoschieck/repos/AE Studio/Rand/rand-ai-reviewer",
  "environment": {},
  "summary": {
    "failed": 7,
    "passed": 17,
    "total": 24,
    "collected": 24
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/llm",
          "type": "Dir"
        }
      ]
    },
    {
      "nodeid": "tests/llm/claim_substantiator/test_basic.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/llm/claim_substantiator/test_basic.py::test_claim_substantiator_basic_cases[substantiation_case_1]",
          "type": "Coroutine",
          "lineno": 16
        },
        {
          "nodeid": "tests/llm/claim_substantiator/test_basic.py::test_claim_substantiator_basic_cases[substantiation_case_2]",
          "type": "Coroutine",
          "lineno": 16
        }
      ]
    },
    {
      "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[common_knowledge_pure_ai_power_intensive]",
          "type": "Coroutine",
          "lineno": 16
        },
        {
          "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[common_knowledge_general_concern]",
          "type": "Coroutine",
          "lineno": 16
        },
        {
          "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[common_knowledge_without_citation_trend]",
          "type": "Coroutine",
          "lineno": 16
        },
        {
          "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[common_knowledge_general_understanding]",
          "type": "Coroutine",
          "lineno": 16
        },
        {
          "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[not_common_knowledge_specific_forecast]",
          "type": "Coroutine",
          "lineno": 16
        },
        {
          "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[not_common_knowledge_superlative_no_citation]",
          "type": "Coroutine",
          "lineno": 16
        },
        {
          "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[not_common_knowledge_state_comparison]",
          "type": "Coroutine",
          "lineno": 16
        }
      ]
    },
    {
      "nodeid": "tests/llm/claim_substantiator",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/llm/claim_substantiator/test_basic.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py",
          "type": "Module"
        }
      ]
    },
    {
      "nodeid": "tests/llm/test_citation_detector.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/llm/test_citation_detector.py::test_citation_detector_agent_cases[citation_case_1]",
          "type": "Coroutine",
          "lineno": 66
        },
        {
          "nodeid": "tests/llm/test_citation_detector.py::test_citation_detector_agent_cases[citation_case_2]",
          "type": "Coroutine",
          "lineno": 66
        },
        {
          "nodeid": "tests/llm/test_citation_detector.py::test_citation_detector_agent_cases[citation_case_3]",
          "type": "Coroutine",
          "lineno": 66
        }
      ]
    },
    {
      "nodeid": "tests/llm/test_claim_detector.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/llm/test_claim_detector.py::test_claim_detector_agent_cases[claim_case_1]",
          "type": "Coroutine",
          "lineno": 68
        },
        {
          "nodeid": "tests/llm/test_claim_detector.py::test_claim_detector_agent_cases[claim_case_2]",
          "type": "Coroutine",
          "lineno": 68
        },
        {
          "nodeid": "tests/llm/test_claim_detector.py::test_claim_detector_agent_cases[claim_case_3_no_claims]",
          "type": "Coroutine",
          "lineno": 68
        }
      ]
    },
    {
      "nodeid": "tests/llm/test_document_chunker.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/llm/test_document_chunker.py::test_document_chunker_agent_cases[chunker_case_basic]",
          "type": "Coroutine",
          "lineno": 55
        },
        {
          "nodeid": "tests/llm/test_document_chunker.py::test_document_chunker_agent_cases[chunker_case_single_paragraph]",
          "type": "Coroutine",
          "lineno": 55
        }
      ]
    },
    {
      "nodeid": "tests/llm/test_reference_extractor.py",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_basic]",
          "type": "Coroutine",
          "lineno": 75
        },
        {
          "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_missing_support]",
          "type": "Coroutine",
          "lineno": 75
        },
        {
          "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_no_support]",
          "type": "Coroutine",
          "lineno": 75
        },
        {
          "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_criminal_justice_all_support]",
          "type": "Coroutine",
          "lineno": 75
        },
        {
          "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_criminal_justice_all_support_docx]",
          "type": "Coroutine",
          "lineno": 75
        },
        {
          "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_criminal_justice_partial_support]",
          "type": "Coroutine",
          "lineno": 75
        },
        {
          "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_criminal_justice_no_support]",
          "type": "Coroutine",
          "lineno": 75
        }
      ]
    },
    {
      "nodeid": "tests/llm",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/llm/claim_substantiator",
          "type": "Dir"
        },
        {
          "nodeid": "tests/llm/test_citation_detector.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/llm/test_claim_detector.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/llm/test_document_chunker.py",
          "type": "Module"
        },
        {
          "nodeid": "tests/llm/test_reference_extractor.py",
          "type": "Module"
        }
      ]
    }
  ],
  "tests": [
    {
      "nodeid": "tests/llm/claim_substantiator/test_basic.py::test_claim_substantiator_basic_cases[substantiation_case_1]",
      "lineno": 16,
      "outcome": "failed",
      "keywords": [
        "test_claim_substantiator_basic_cases[substantiation_case_1]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "substantiation_case_1",
        "test_basic.py",
        "claim_substantiator",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.00041199999395757914,
        "outcome": "passed"
      },
      "call": {
        "duration": 39.502349417016376,
        "outcome": "failed",
        "crash": {
          "path": "/Users/ricardoschieck/repos/AE Studio/Rand/rand-ai-reviewer/tests/llm/claim_substantiator/test_basic.py",
          "lineno": 27,
          "message": "AssertionError: substantiation_case_1: \u274c 0% (0/1) of runs passed Strict Comparisons\n  \u274c Run 1/1 - Strict Comparisons\n      ```\n      Fields with differences with expected: {\n    \"values_changed\": {\n      \"root['severity']\": {\n        \"new_value\": 3,\n        \"old_value\": 2\n      }\n    }\n  }\n      ```\n      \n  \u274c 0% (0/1) of runs passed LLM Comparisons\n  \u274c Run 1/1 - LLM Comparisons\n      ```\n      Mismatch in rationale: received claims Smith (2020) provides relevant background, whereas expected says it shows insights but not \u201cuseful background.\u201d Feedback also diverges: expected suggests softening the claim; received suggests referencing only Smith. Therefore, not equivalent.\n      ```\n      \nassert False\n +  where False = EvaluationResult(passed=False, rationale='\u274c 0% (0/1) of runs passed Strict Comparisons\\n\u274c Run 1/1 - Strict Comparisons\\n    ```\\n    Fields with differences with expected: {\\n  \"values_changed\": {\\n    \"root[\\'severity\\']\": {\\n      \"new_value\": 3,\\n      \"old_value\": 2\\n    }\\n  }\\n}\\n    ```\\n    \\n\u274c 0% (0/1) of runs passed LLM Comparisons\\n\u274c Run 1/1 - LLM Comparisons\\n    ```\\n    Mismatch in rationale: received claims Smith (2020) provides relevant background, whereas expected says it shows insights but not \u201cuseful background.\u201d Feedback also diverges: expected suggests softening the claim; received suggests referencing only Smith. Therefore, not equivalent.\\n    ```\\n    ').passed"
        },
        "traceback": [
          {
            "path": "tests/llm/claim_substantiator/test_basic.py",
            "lineno": 27,
            "message": "AssertionError"
          }
        ],
        "longrepr": "case = AgentTestCase(name='substantiation_case_1', agent=<Agent(id=None, name='Claim Substantiator', version=None)>, response...erity', 'is_substantiated'}, llm_fields={'rationale', 'feedback'}, ignore_fields=set(), evaluator_model='openai:gpt-5')\n\n    @pytest.mark.asyncio\n    @pytest.mark.parametrize(\"case\", _build_cases(), ids=lambda case: case.name)\n    async def test_claim_substantiator_basic_cases(case):\n        \"\"\"Test basic claim substantiation cases.\"\"\"\n        await case.run()\n        eval_result = await case.compare_results()\n    \n        # Store eval_result for reporting\n        case._eval_result = eval_result\n    \n>       assert eval_result.passed, f\"{case.name}: {eval_result.rationale}\"\nE       AssertionError: substantiation_case_1: \u274c 0% (0/1) of runs passed Strict Comparisons\nE         \u274c Run 1/1 - Strict Comparisons\nE             ```\nE             Fields with differences with expected: {\nE           \"values_changed\": {\nE             \"root['severity']\": {\nE               \"new_value\": 3,\nE               \"old_value\": 2\nE             }\nE           }\nE         }\nE             ```\nE             \nE         \u274c 0% (0/1) of runs passed LLM Comparisons\nE         \u274c Run 1/1 - LLM Comparisons\nE             ```\nE             Mismatch in rationale: received claims Smith (2020) provides relevant background, whereas expected says it shows insights but not \u201cuseful background.\u201d Feedback also diverges: expected suggests softening the claim; received suggests referencing only Smith. Therefore, not equivalent.\nE             ```\nE             \nE       assert False\nE        +  where False = EvaluationResult(passed=False, rationale='\u274c 0% (0/1) of runs passed Strict Comparisons\\n\u274c Run 1/1 - Strict Comparisons\\n    ```\\n    Fields with differences with expected: {\\n  \"values_changed\": {\\n    \"root[\\'severity\\']\": {\\n      \"new_value\": 3,\\n      \"old_value\": 2\\n    }\\n  }\\n}\\n    ```\\n    \\n\u274c 0% (0/1) of runs passed LLM Comparisons\\n\u274c Run 1/1 - LLM Comparisons\\n    ```\\n    Mismatch in rationale: received claims Smith (2020) provides relevant background, whereas expected says it shows insights but not \u201cuseful background.\u201d Feedback also diverges: expected suggests softening the claim; received suggests referencing only Smith. Therefore, not equivalent.\\n    ```\\n    ').passed\n\ntests/llm/claim_substantiator/test_basic.py:27: AssertionError"
      },
      "teardown": {
        "duration": 0.0005379169597290456,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "substantiation_case_1",
        "agent": {
          "name": "Claim Substantiator",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "# Effects of Widgets on System Performance\n\nThis study explores how widgets impact overall gadget performance metrics.\n\n## Introduction\nWidgets have been widely adopted across industries. Prior work s...",
          "paragraph": "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights.",
          "chunk": "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights.",
          "claim": "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights",
          "cited_references": "The Effects of Widgets on Gadgets\n\nSmith, J. (2020)\n\nAbstract\nThis paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency. We present e...",
          "domain_context": "",
          "audience_context": ""
        },
        "expected_output": {
          "is_substantiated": false,
          "rationale": "Only one supporting document (Smith, 2020) is provided which shows it investigates widget effects and presents experimental results\u2014evidence of insights, but not that these are 'useful background.' The second cited work (Doe & Roe, 2019) has no supporting document. Thus, the claim that prior work provides useful background/insights is not adequately substantiated.",
          "feedback": "Provide the Doe & Roe (2019) document or quotes/details from Smith (2020) indicating its work provides useful background. Alternatively, soften the claim to 'prior work provides insights' or 'prior work has investigated this area.'",
          "severity": 2
        },
        "actual_outputs": [
          {
            "is_substantiated": false,
            "is_common_knowledge": false,
            "common_knowledge_rationale": "Whether specific cited papers (Smith 2020; Doe & Roe 2019) provide useful background is not a universally known fact; it depends on the content of those works and thus requires verification.",
            "rationale": "The provided supporting document (Smith, 2020) indeed investigates widgets\u2019 effects on gadget performance and reasonably offers relevant background/insights. However, the claim also cites Doe & Roe (2019), and no supporting document for that citation is provided here, so the full claim (covering both works) cannot be verified.",
            "feedback": "Either supply the Doe & Roe (2019) supporting document or revise the sentence to reference only Smith (2020). For stronger substantiation, briefly summarize the specific background/insights each cited work contributes.",
            "severity": 3
          }
        ],
        "evaluation_config": {
          "strict_fields": [
            "severity",
            "is_substantiated"
          ],
          "llm_fields": [
            "rationale",
            "feedback"
          ],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": false,
          "rationale": "\u274c 0% (0/1) of runs passed Strict Comparisons\n\u274c Run 1/1 - Strict Comparisons\n    ```\n    Fields with differences with expected: {\n  \"values_changed\": {\n    \"root['severity']\": {\n      \"new_value\": 3,\n      \"old_value\": 2\n    }\n  }\n}\n    ```\n    \n\u274c 0% (0/1) of runs passed LLM Comparisons\n\u274c Run 1/1 - LLM Comparisons\n    ```\n    Mismatch in rationale: received claims Smith (2020) provides relevant background, whereas expected says it shows insights but not \u201cuseful background.\u201d Feedback also diverges: expected suggests softening the claim; received suggests referencing only Smith. Therefore, not equivalent.\n    ```\n    "
        }
      }
    },
    {
      "nodeid": "tests/llm/claim_substantiator/test_basic.py::test_claim_substantiator_basic_cases[substantiation_case_2]",
      "lineno": 16,
      "outcome": "passed",
      "keywords": [
        "test_claim_substantiator_basic_cases[substantiation_case_2]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "substantiation_case_2",
        "test_basic.py",
        "claim_substantiator",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.00021425000159069896,
        "outcome": "passed"
      },
      "call": {
        "duration": 21.151477042003535,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0017247499781660736,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "substantiation_case_2",
        "agent": {
          "name": "Claim Substantiator",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "# Effects of Widgets on System Performance\n\nThis study explores how widgets impact overall gadget performance metrics.\n\n## Introduction\nWidgets have been widely adopted across industries. Prior work s...",
          "paragraph": "cellphones have a positive impact on the user's writing proficiency in most countries (Smith, 2017)",
          "chunk": "cellphones have a positive impact on the user's writing proficiency in most countries (Smith, 2017)",
          "claim": "Cellphones have a positive impact on the user's writing proficiency in most countries",
          "cited_references": "A Study of The Effect of Cellphones on Writing Ability\n\nSmith, A.; Anderson, T. (2017)\n\nAbstract\nWe study 1000 participants in terms of the effect of their cellphone use on their writing ability. We f...",
          "domain_context": "",
          "audience_context": ""
        },
        "expected_output": {
          "is_substantiated": false,
          "rationale": "The claim is directly contradicted by the cited supporting document. Smith & Anderson (2017) found 'conclusive evidence that smartphone use has no effect on writing ability of users,' which contradicts the claim of a positive impact.",
          "feedback": "The claim should be corrected to align with the cited research findings, or the citation should be removed and replaced with supporting evidence that actually demonstrates a positive impact.",
          "severity": 4
        },
        "actual_outputs": [
          {
            "is_substantiated": false,
            "is_common_knowledge": false,
            "common_knowledge_rationale": "This is a specific research claim about effects of cellphone use on writing proficiency and a cross-country generalization; such assertions are neither basic facts nor universally accepted in the field.",
            "rationale": "The cited 2017 study (Smith & Anderson) reports no effect of smartphone use on writing ability among 1000 participants and does not address cross-country differences. This directly contradicts the claim of a positive impact and provides no support for the \u201cin most countries\u201d qualifier.",
            "feedback": "Revise the claim to reflect the cited study\u2019s finding of no effect, or provide new, authoritative sources (e.g., multi-country studies or meta-analyses) that demonstrate a positive impact across countries. Remove or justify the \u201cin most countries\u201d qualifier with appropriate cross-national evidence.",
            "severity": 4
          }
        ],
        "evaluation_config": {
          "strict_fields": [
            "severity",
            "is_substantiated"
          ],
          "llm_fields": [
            "rationale",
            "feedback"
          ],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\n\u2705 100% (1/1) of runs passed LLM Comparisons"
        }
      }
    },
    {
      "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[common_knowledge_pure_ai_power_intensive]",
      "lineno": 16,
      "outcome": "passed",
      "keywords": [
        "test_claim_substantiator_common_knowledge_cases[common_knowledge_pure_ai_power_intensive]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "common_knowledge_pure_ai_power_intensive",
        "test_common_knowledge.py",
        "claim_substantiator",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0005303340149112046,
        "outcome": "passed"
      },
      "call": {
        "duration": 45.93112399999518,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0008835839689709246,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "common_knowledge_pure_ai_power_intensive",
        "agent": {
          "name": "Claim Substantiator",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "Draft Report\n\nAssessing the U.S. Net Available Additional Power Capacity by 2030\n\nEstimating short-term increases in electricity generation within the United States and the ability to meet growth in A...",
          "paragraph": "**The anticipated load growth from AI is unprecedented in both magnitude and speed.** Developing advanced AI models requires enormous amounts of power[[4]](#footnote-3) and existing facilities are alr...",
          "chunk": "**The anticipated load growth from AI is unprecedented in both magnitude and speed.** Developing advanced AI models requires enormous amounts of power[[4]](#footnote-3) and existing facilities are alr...",
          "claim": "Developing advanced AI models requires enormous amounts of power",
          "cited_references": "# AI Power Consumption - McKinsey Report Extract\n\nTechnology, Media & Telecommunications Practice\nOctober 2024\n\n## AI Data Centers and Power Requirements\n\nThe race is on to build sufficient data cente...",
          "domain_context": "\n## Domain Context\nConsider this user provided domain: ```AI and U.S. energy policy```\n\nWhen analyzing claims, consider domain-specific standards, terminology, and expectations. For example:\n- What co...",
          "audience_context": "\n## Target Audience Context\nConsider this user provided target audience: ```Policy makers and researchers```\n\nWhen evaluating claims and evidence, consider audience-appropriate standards:\n- Adjust the..."
        },
        "expected_output": {
          "is_substantiated": true,
          "is_common_knowledge": true,
          "common_knowledge_rationale": "Within the AI and energy domain, it is widely and routinely reported that training large AI models is energy-intensive. Policymakers and researchers (including DOE) and industry analyses frequently note high and rising data center power needs driven by AI workloads. The claim is qualitative and does not assert specific numbers, aligning with well-established understanding.",
          "rationale": "The McKinsey (Oct 2024) report explicitly ties AI workloads\u2014especially training\u2014to large and growing power needs: data centers have \"exploded in size in terms of power consumption,\" with facilities of ~200 MW now common; AI-ready centers have high power densities; training models like ChatGPT can exceed 80 kW per rack, and Nvidia GB200-based racks may reach up to 120 kW. The DOE SEAB (July 2024) report states data center power demands are growing rapidly, with hyperscale interconnection requests of 300\u20131000 MW, and identifies expanding AI applications (LLMs) as a significant driver with \"sizeable\" energy needs. Together these sources substantiate that developing (training) advanced AI models requires very large amounts of electrical power.",
          "feedback": "No change needed. For added strength, consider adding a quantitative example from the sources (e.g., 80\u2013120 kW per rack for training, 200 MW facilities, 300\u20131000 MW interconnection requests).",
          "severity": 0
        },
        "actual_outputs": [
          {
            "is_substantiated": true,
            "is_common_knowledge": true,
            "common_knowledge_rationale": "Within AI and U.S. energy policy circles, it is widely recognized that training large AI models is power-intensive. This has been broadly reported by government and industry sources and discussed extensively in 2023\u20132025 policy and technical discourse.",
            "rationale": "The cited sources explicitly describe high power needs for advanced AI workloads. McKinsey notes AI-ready data centers with ~200 MW facilities, training racks drawing 80\u2013120 kW per rack, and rapidly rising demand driven by AI. The DOE SEAB report states hyperscale interconnection requests of 300\u20131000 MW are increasingly common and that LLM workloads have sizeable energy requirements exceeding traditional computing, with high power densities that strain the grid. These details substantiate that developing advanced AI models requires large amounts of power.",
            "feedback": "Optionally improve precision by adding a quantitative example (e.g., representative MW/MWh for a major training run or typical facility-level consumption) to replace the qualitative term \u201cenormous.\u201d",
            "severity": 0
          }
        ],
        "evaluation_config": {
          "strict_fields": [
            "severity",
            "is_substantiated",
            "is_common_knowledge"
          ],
          "llm_fields": [
            "rationale",
            "feedback",
            "common_knowledge_rationale"
          ],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\n\u2705 100% (1/1) of runs passed LLM Comparisons"
        }
      }
    },
    {
      "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[common_knowledge_general_concern]",
      "lineno": 16,
      "outcome": "passed",
      "keywords": [
        "test_claim_substantiator_common_knowledge_cases[common_knowledge_general_concern]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "common_knowledge_general_concern",
        "test_common_knowledge.py",
        "claim_substantiator",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0006303330301307142,
        "outcome": "passed"
      },
      "call": {
        "duration": 53.57873062498402,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0011531250202096999,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "common_knowledge_general_concern",
        "agent": {
          "name": "Claim Substantiator",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "Draft Report\n\nAssessing the U.S. Net Available Additional Power Capacity by 2030\n\nEstimating short-term increases in electricity generation within the United States and the ability to meet growth in A...",
          "paragraph": "**The anticipated load growth from AI is unprecedented in both magnitude and speed.** Developing advanced AI models requires enormous amounts of power[[4]](#footnote-3) and existing facilities are alr...",
          "chunk": "**The anticipated load growth from AI is unprecedented in both magnitude and speed.** Developing advanced AI models requires enormous amounts of power[[4]](#footnote-3) and existing facilities are alr...",
          "claim": "Data center power consumption, especially driven by AI, is a significant and increasing concern",
          "cited_references": "# DOE SEAB Report on AI and Data Center Infrastructure - Extract\n\nU.S. Department of Energy: Secretary of Energy Advisory Board\n\"Recommendations on Powering Artificial Intelligence and Data Center Inf...",
          "domain_context": "\n## Domain Context\nConsider this user provided domain: ```AI and U.S. energy policy```\n\nWhen analyzing claims, consider domain-specific standards, terminology, and expectations. For example:\n- What co...",
          "audience_context": "\n## Target Audience Context\nConsider this user provided target audience: ```Policy makers and energy specialists```\n\nWhen evaluating claims and evidence, consider audience-appropriate standards:\n- Adj..."
        },
        "expected_output": {
          "is_substantiated": true,
          "is_common_knowledge": true,
          "common_knowledge_rationale": "By late 2024, multiple authoritative sources (DOE SEAB, major industry analyses, utility planning documents) and extensive media coverage widely recognize rapidly rising data center electricity demand\u2014especially from AI\u2014as a material grid planning and reliability concern. For an audience of policy and energy specialists, this is broadly accepted background knowledge.",
          "rationale": "The DOE SEAB (July 2024) explicitly states that data center power demands are growing rapidly, with hyperscale requests stretching local grid capacity, and identifies AI demand as a significant factor and reliability concern. McKinsey (Oct 2024) projects global data center demand more than tripling by 2030, driven largely by AI, notes tight supply, power constraints, and concern that utilities may be unable to provide sufficient power. Epoch AI (Aug 2024) frames power as a primary bottleneck for AI scaling, details unprecedented multi\u2011GW campus plans, and highlights grid-level constraints and the challenge of expanding data center power supply by 2030. Together, these sources substantiate that AI-driven data center power consumption is significant and growing, and is a concern for grids and planners.",
          "feedback": "No change needed. If desired, strengthen with a brief quantitative anchor (e.g., DOE/IEA or McKinsey figures on current GW and projected growth) to make \"significant and growing\" more concrete.",
          "severity": 0
        },
        "actual_outputs": [
          {
            "is_substantiated": true,
            "is_common_knowledge": true,
            "common_knowledge_rationale": "Among U.S. energy policy and power-sector audiences, the rapid growth of AI-driven data center loads and associated grid strain has been widely reported by government (DOE SEAB), reliability organizations (e.g., NERC), and major industry analyses; it is a broadly recognized trend rather than a disputed finding.",
            "rationale": "The DOE SEAB report explicitly identifies AI-driven data center demand as a \u201cmaterial concern,\u201d noting rapidly growing power needs, hyperscale interconnection requests of 300\u20131000 MW, and resulting planning and reliability challenges. It highlights LLMs as significant drivers with high power densities that strain existing infrastructure. The McKinsey report shows strong growth in data center power demand (from ~55 GW in 2023 with potential tripling by 2030), high per-rack power for AI workloads, and estimates that a large share of future capacity is AI-focused. Together, these sources substantiate that data center power consumption is both significant and increasing, with AI as a key driver.",
            "feedback": "No change needed. For added rigor for policy audiences, consider also citing NERC\u2019s 2024 Long-Term Reliability Assessment to reinforce the grid reliability dimension.",
            "severity": 0
          }
        ],
        "evaluation_config": {
          "strict_fields": [
            "severity",
            "is_substantiated",
            "is_common_knowledge"
          ],
          "llm_fields": [
            "rationale",
            "feedback",
            "common_knowledge_rationale"
          ],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\n\u2705 100% (1/1) of runs passed LLM Comparisons"
        }
      }
    },
    {
      "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[common_knowledge_without_citation_trend]",
      "lineno": 16,
      "outcome": "passed",
      "keywords": [
        "test_claim_substantiator_common_knowledge_cases[common_knowledge_without_citation_trend]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "common_knowledge_without_citation_trend",
        "test_common_knowledge.py",
        "claim_substantiator",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0005010839668102562,
        "outcome": "passed"
      },
      "call": {
        "duration": 44.59364508301951,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0017994999652728438,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "common_knowledge_without_citation_trend",
        "agent": {
          "name": "Claim Substantiator",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "Draft Report\n\nAssessing the U.S. Net Available Additional Power Capacity by 2030\n\nEstimating short-term increases in electricity generation within the United States and the ability to meet growth in A...",
          "paragraph": "Estimating short-term increases in electricity generation within the United States and the ability to meet growth in AI power demand",
          "chunk": "Estimating short-term increases in electricity generation within the United States and the ability to meet growth in AI power demand",
          "claim": "AI power demand is growing",
          "cited_references": "",
          "domain_context": "\n## Domain Context\nConsider this user provided domain: ```AI and U.S. energy policy```\n\nWhen analyzing claims, consider domain-specific standards, terminology, and expectations. For example:\n- What co...",
          "audience_context": "\n## Target Audience Context\nConsider this user provided target audience: ```RAND researchers and policy makers```\n\nWhen evaluating claims and evidence, consider audience-appropriate standards:\n- Adjus..."
        },
        "expected_output": {
          "is_substantiated": false,
          "is_common_knowledge": true,
          "common_knowledge_rationale": "Within the AI and U.S. energy domain, it is widely and repeatedly reported by government, industry, and research sources that data center/AI electricity demand has been increasing; the claim is a general, non-quantitative trend statement that is broadly accepted by the intended audience.",
          "rationale": "No supporting documents are cited alongside the claim, so it cannot be verified from the provided evidence here.",
          "feedback": "Add an authoritative citation to substantiate the trend, e.g., to sources already listed in the report's references such as DOE SEAB (2024), NERC's 2024 LTRA, Goldman Sachs (2024), McKinsey (2024), or Epoch AI (2024).",
          "severity": 1
        },
        "actual_outputs": [
          {
            "is_substantiated": false,
            "is_common_knowledge": true,
            "common_knowledge_rationale": "For AI and U.S. energy policy audiences, it is broadly understood and widely reported that electricity demand from AI-driven data centers has been increasing, making this a basic, non-quantitative trend widely recognized across government and industry analyses.",
            "rationale": "No supporting documents were provided with the claim, so it cannot be verified against cited evidence here. The statement is qualitative and aligns with widely reported trends, but absent explicit citations, it is not substantiated by the provided documents.",
            "feedback": "Add authoritative citations (e.g., DOE SEAB 2024 recommendations on AI and data center power, NERC 2024 Long-Term Reliability Assessment, or recent industry analyses) and, if possible, include a concrete statistic or date range to anchor the growth claim.",
            "severity": 1
          }
        ],
        "evaluation_config": {
          "strict_fields": [
            "severity",
            "is_substantiated",
            "is_common_knowledge"
          ],
          "llm_fields": [
            "rationale",
            "feedback",
            "common_knowledge_rationale"
          ],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\n\u2705 100% (1/1) of runs passed LLM Comparisons"
        }
      }
    },
    {
      "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[common_knowledge_general_understanding]",
      "lineno": 16,
      "outcome": "passed",
      "keywords": [
        "test_claim_substantiator_common_knowledge_cases[common_knowledge_general_understanding]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "common_knowledge_general_understanding",
        "test_common_knowledge.py",
        "claim_substantiator",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0008354580495506525,
        "outcome": "passed"
      },
      "call": {
        "duration": 48.54670795798302,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0004728340427391231,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "common_knowledge_general_understanding",
        "agent": {
          "name": "Claim Substantiator",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "Draft Report\n\nAssessing the U.S. Net Available Additional Power Capacity by 2030\n\nEstimating short-term increases in electricity generation within the United States and the ability to meet growth in A...",
          "paragraph": "Large concentrated loads can pose challenges for grid infrastructure and stability.",
          "chunk": "Large concentrated loads can pose challenges for grid infrastructure and stability.",
          "claim": "Large concentrated loads can pose infrastructure and stability challenges",
          "cited_references": "",
          "domain_context": "\n## Domain Context\nConsider this user provided domain: ```Power systems and energy```\n\nWhen analyzing claims, consider domain-specific standards, terminology, and expectations. For example:\n- What con...",
          "audience_context": "\n## Target Audience Context\nConsider this user provided target audience: ```Grid operators```\n\nWhen evaluating claims and evidence, consider audience-appropriate standards:\n- Adjust the rigor of subst..."
        },
        "expected_output": {
          "is_substantiated": false,
          "is_common_knowledge": true,
          "common_knowledge_rationale": "For grid operators and power system engineers, it is fundamental knowledge that large, concentrated loads require careful planning for both infrastructure upgrades and grid stability management.",
          "rationale": "No citations are provided for this general principle.",
          "feedback": "While this is common knowledge for grid operators, consider adding a specific reference if discussing particular load sizes or impacts.",
          "severity": 1
        },
        "actual_outputs": [
          {
            "is_substantiated": false,
            "is_common_knowledge": true,
            "common_knowledge_rationale": "Within power systems, it is a well-established principle that large single-point loads (e.g., smelters, data centers) can stress transmission/distribution assets, require voltage/reactive support, and create stability/contingency challenges. Grid operators routinely plan around these issues; no specific numbers are asserted here.",
            "rationale": "No supporting documents were provided, so the claim is not substantiated by citations. However, the statement aligns with standard grid planning and operations knowledge.",
            "feedback": "Add an authoritative citation to remove any doubt, such as a NERC reliability assessment or incident review discussing large-load impacts, DOE/SEAB recommendations on large data center interconnections, or ESIG/utility planning guidance on integrating large loads. Alternatively, include a brief example (e.g., reactive power and transformer/line capacity upgrades) to clarify the types of challenges.",
            "severity": 1
          }
        ],
        "evaluation_config": {
          "strict_fields": [
            "severity",
            "is_substantiated",
            "is_common_knowledge"
          ],
          "llm_fields": [
            "rationale",
            "feedback",
            "common_knowledge_rationale"
          ],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\n\u2705 100% (1/1) of runs passed LLM Comparisons"
        }
      }
    },
    {
      "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[not_common_knowledge_specific_forecast]",
      "lineno": 16,
      "outcome": "passed",
      "keywords": [
        "test_claim_substantiator_common_knowledge_cases[not_common_knowledge_specific_forecast]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "not_common_knowledge_specific_forecast",
        "test_common_knowledge.py",
        "claim_substantiator",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0006114169955253601,
        "outcome": "passed"
      },
      "call": {
        "duration": 29.421268166974187,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0008782499935477972,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "not_common_knowledge_specific_forecast",
        "agent": {
          "name": "Claim Substantiator",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "Draft Report\n\nAssessing the U.S. Net Available Additional Power Capacity by 2030\n\nEstimating short-term increases in electricity generation within the United States and the ability to meet growth in A...",
          "paragraph": "As the demand for computational resources continues to rise, electricity consumption by AI data centers is expected to grow at an unprecedented rate in the coming years.[[6]](#footnote-5) Based on cur...",
          "chunk": "As the demand for computational resources continues to rise, electricity consumption by AI data centers is expected to grow at an unprecedented rate in the coming years.[[6]](#footnote-5) Based on cur...",
          "claim": "Estimates for AI load growth include 63 GW by 2028",
          "cited_references": "# Can AI Scaling Continue Through 2030? - Epoch AI Report Extract\n\nSevilla, Jaime, Tamay Besiroglu, Ben Cottier, Josh You, Edu Rold\u00e1n, Pablo Villalobos, and Ege Erdil\nEpoch AI, August 20, 2024\n\n## Pow...",
          "domain_context": "\n## Domain Context\nConsider this user provided domain: ```AI and U.S. energy policy```\n\nWhen analyzing claims, consider domain-specific standards, terminology, and expectations. For example:\n- What co...",
          "audience_context": "\n## Target Audience Context\nConsider this user provided target audience: ```RAND researchers and policy makers```\n\nWhen evaluating claims and evidence, consider audience-appropriate standards:\n- Adjus..."
        },
        "expected_output": {
          "is_substantiated": false,
          "is_common_knowledge": false,
          "common_knowledge_rationale": "A precise quantitative forecast (63 GW by 2028) about AI-related power load is not a basic or universally accepted fact; it requires specific sourcing and verification, especially for a policy/research audience.",
          "rationale": "The 63 GW-by-2028 estimate is attributed to SemiAnalysis [7], but that supporting document was not provided. The other cited documents supplied (Epoch AI and Goldman Sachs, McKinsey) do not contain this 63 GW figure for 2028 and discuss different scopes and timelines (e.g., overall data center demand to 2030, ranges for capacity growth). Therefore, the specific 63 GW claim is not substantiated by the provided materials.",
          "feedback": "Provide the actual SemiAnalysis report or excerpt that contains the 63 GW-by-2028 estimate, and clarify scope (US vs. global, AI-only vs. all data centers, peak capacity vs. average load). Alternatively, revise the claim to align with figures supported by the provided Goldman Sachs or McKinsey sources or add additional corroborating sources.",
          "severity": 4
        },
        "actual_outputs": [
          {
            "is_substantiated": false,
            "is_common_knowledge": false,
            "common_knowledge_rationale": "A precise quantitative projection (63 GW by 2028) about AI load growth is not a basic, widely accepted fact; it is a specific estimate that requires citation to a concrete source and methodology.",
            "rationale": "The provided supporting documents (Epoch AI extract and McKinsey report extract) do not contain an estimate of 63 GW by 2028. The McKinsey extract discusses global data center demand projections to 2030 (171\u2013219 GW) and current demand (~55 GW in 2023) but provides no 2028 figure or 63 GW estimate. The Epoch AI extract focuses on campus sizes (1\u20135 GW) and grid constraints without giving a total load growth estimate for 2028. Therefore, the specific claim of 63 GW by 2028 is not supported by the cited supporting documents.",
            "feedback": "Cite the correct source that provides the 63 GW by 2028 estimate (likely Patel et al., SemiAnalysis, 2024, as referenced in the main document) and clarify scope (U.S. vs. global), whether the figure is incremental AI-specific load vs. total data center load, and the scenario assumptions. Alternatively, adjust the claim to match figures actually present in the provided sources or include the Goldman Sachs/McKinsey/Epoch numbers with proper scope and dates.",
            "severity": 4
          }
        ],
        "evaluation_config": {
          "strict_fields": [
            "severity",
            "is_substantiated",
            "is_common_knowledge"
          ],
          "llm_fields": [
            "rationale",
            "feedback",
            "common_knowledge_rationale"
          ],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\n\u2705 100% (1/1) of runs passed LLM Comparisons"
        }
      }
    },
    {
      "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[not_common_knowledge_superlative_no_citation]",
      "lineno": 16,
      "outcome": "passed",
      "keywords": [
        "test_claim_substantiator_common_knowledge_cases[not_common_knowledge_superlative_no_citation]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "not_common_knowledge_superlative_no_citation",
        "test_common_knowledge.py",
        "claim_substantiator",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.00046433298848569393,
        "outcome": "passed"
      },
      "call": {
        "duration": 36.08265091700014,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0010469999979250133,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "not_common_knowledge_superlative_no_citation",
        "agent": {
          "name": "Claim Substantiator",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "Draft Report\n\nAssessing the U.S. Net Available Additional Power Capacity by 2030\n\nEstimating short-term increases in electricity generation within the United States and the ability to meet growth in A...",
          "paragraph": "The growth in AI development requires unprecedented power capacity expansion.",
          "chunk": "The growth in AI development requires unprecedented power capacity expansion.",
          "claim": "AI development requires unprecedented power capacity expansion",
          "cited_references": "",
          "domain_context": "\n## Domain Context\nConsider this user provided domain: ```AI and U.S. energy policy```\n\nWhen analyzing claims, consider domain-specific standards, terminology, and expectations. For example:\n- What co...",
          "audience_context": "\n## Target Audience Context\nConsider this user provided target audience: ```Policy makers```\n\nWhen evaluating claims and evidence, consider audience-appropriate standards:\n- Adjust the rigor of substa..."
        },
        "expected_output": {
          "is_substantiated": false,
          "is_common_knowledge": false,
          "common_knowledge_rationale": "While the general concept that AI is energy-intensive is known, the superlative 'unprecedented' makes a specific historical comparison that requires evidence. This is not common knowledge.",
          "rationale": "No supporting documents or citations provided. The term 'unprecedented' requires historical comparison and quantitative evidence to substantiate.",
          "feedback": "Provide citations with historical data comparing current/projected AI power growth to past infrastructure buildouts. Quantify what makes it 'unprecedented' (e.g., GW/year growth rate, total scale).",
          "severity": 4
        },
        "actual_outputs": [
          {
            "is_substantiated": false,
            "is_common_knowledge": false,
            "common_knowledge_rationale": "While many policymakers are aware that AI/data center demand is growing rapidly, the assertion that it \"requires unprecedented power capacity expansion\" is a strong, comparative claim that is not a basic, universally accepted fact. It implies a historical comparison and necessity that must be evidenced with data, not assumed.",
            "rationale": "No supporting documents were provided with the claim. The statement is categorical and uses the strong qualifier \"unprecedented,\" which requires comparative evidence (e.g., projected AI-driven load growth versus historical capacity additions). Without cited sources, the claim cannot be verified.",
            "feedback": "Add authoritative citations that quantify projected AI/data center load growth and compare it to historical U.S. capacity additions to substantiate \"unprecedented.\" Potential sources include DOE SEAB (2024) recommendations on AI/data centers, NERC 2024 Long-Term Reliability Assessment, EIA historical capacity data, and recent industry analyses (e.g., Goldman Sachs 2024; McKinsey 2024). Alternatively, soften the language (e.g., \"is expected to drive significant capacity expansion\") and provide specific, sourced figures.",
            "severity": 4
          }
        ],
        "evaluation_config": {
          "strict_fields": [
            "severity",
            "is_substantiated",
            "is_common_knowledge"
          ],
          "llm_fields": [
            "rationale",
            "feedback",
            "common_knowledge_rationale"
          ],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\n\u2705 100% (1/1) of runs passed LLM Comparisons"
        }
      }
    },
    {
      "nodeid": "tests/llm/claim_substantiator/test_common_knowledge.py::test_claim_substantiator_common_knowledge_cases[not_common_knowledge_state_comparison]",
      "lineno": 16,
      "outcome": "failed",
      "keywords": [
        "test_claim_substantiator_common_knowledge_cases[not_common_knowledge_state_comparison]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "not_common_knowledge_state_comparison",
        "test_common_knowledge.py",
        "claim_substantiator",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0004987910506315529,
        "outcome": "passed"
      },
      "call": {
        "duration": 124.54371679201722,
        "outcome": "failed",
        "crash": {
          "path": "/Users/ricardoschieck/repos/AE Studio/Rand/rand-ai-reviewer/tests/llm/claim_substantiator/test_common_knowledge.py",
          "lineno": 34,
          "message": "AssertionError: not_common_knowledge_state_comparison: \u274c 0% (0/1) of runs passed Strict Comparisons\n  \u274c Run 1/1 - Strict Comparisons\n      ```\n      Fields with differences with expected: {\n    \"values_changed\": {\n      \"root['severity']\": {\n        \"new_value\": 3,\n        \"old_value\": 4\n      }\n    }\n  }\n      ```\n      \n  \u274c 0% (0/1) of runs passed LLM Comparisons\n  \u274c Run 1/1 - LLM Comparisons\n      ```\n      Common knowledge and rationale fields are broadly aligned, but the feedback diverges: the expected advises citing EIA even for the generalized state-capacity comparison and to include exact state values, whereas the received suggests citing the Epoch AI report for the generalized claim and does not explicitly call for including the exact values. This is a substantive mismatch.\n      ```\n      \nassert False\n +  where False = EvaluationResult(passed=False, rationale='\u274c 0% (0/1) of runs passed Strict Comparisons\\n\u274c Run 1/1 - Strict Comparisons\\n    ```\\n    Fields with differences with expected: {\\n  \"values_changed\": {\\n    \"root[\\'severity\\']\": {\\n      \"new_value\": 3,\\n      \"old_value\": 4\\n    }\\n  }\\n}\\n    ```\\n    \\n\u274c 0% (0/1) of runs passed LLM Comparisons\\n\u274c Run 1/1 - LLM Comparisons\\n    ```\\n    Common knowledge and rationale fields are broadly aligned, but the feedback diverges: the expected advises citing EIA even for the generalized state-capacity comparison and to include exact state values, whereas the received suggests citing the Epoch AI report for the generalized claim and does not explicitly call for including the exact values. This is a substantive mismatch.\\n    ```\\n    ').passed"
        },
        "traceback": [
          {
            "path": "tests/llm/claim_substantiator/test_common_knowledge.py",
            "lineno": 34,
            "message": "AssertionError"
          }
        ],
        "longrepr": "case = AgentTestCase(name='not_common_knowledge_state_comparison', agent=<Agent(id=None, name='Claim Substantiator', version=...lm_fields={'rationale', 'feedback', 'common_knowledge_rationale'}, ignore_fields=set(), evaluator_model='openai:gpt-5')\n\n    @pytest.mark.asyncio\n    @pytest.mark.parametrize(\"case\", _build_cases(), ids=lambda case: case.name)\n    async def test_claim_substantiator_common_knowledge_cases(case):\n        \"\"\"\n        Test common knowledge detection and severity assignment.\n    \n        These tests validate:\n        1. Correct identification of common knowledge claims\n        2. Appropriate severity levels for common knowledge with quantifiers\n        3. Domain and audience context sensitivity\n        \"\"\"\n        await case.run()\n        eval_result = await case.compare_results()\n    \n        # Store eval_result for reporting\n        case._eval_result = eval_result\n    \n>       assert eval_result.passed, f\"{case.name}: {eval_result.rationale}\"\nE       AssertionError: not_common_knowledge_state_comparison: \u274c 0% (0/1) of runs passed Strict Comparisons\nE         \u274c Run 1/1 - Strict Comparisons\nE             ```\nE             Fields with differences with expected: {\nE           \"values_changed\": {\nE             \"root['severity']\": {\nE               \"new_value\": 3,\nE               \"old_value\": 4\nE             }\nE           }\nE         }\nE             ```\nE             \nE         \u274c 0% (0/1) of runs passed LLM Comparisons\nE         \u274c Run 1/1 - LLM Comparisons\nE             ```\nE             Common knowledge and rationale fields are broadly aligned, but the feedback diverges: the expected advises citing EIA even for the generalized state-capacity comparison and to include exact state values, whereas the received suggests citing the Epoch AI report for the generalized claim and does not explicitly call for including the exact values. This is a substantive mismatch.\nE             ```\nE             \nE       assert False\nE        +  where False = EvaluationResult(passed=False, rationale='\u274c 0% (0/1) of runs passed Strict Comparisons\\n\u274c Run 1/1 - Strict Comparisons\\n    ```\\n    Fields with differences with expected: {\\n  \"values_changed\": {\\n    \"root[\\'severity\\']\": {\\n      \"new_value\": 3,\\n      \"old_value\": 4\\n    }\\n  }\\n}\\n    ```\\n    \\n\u274c 0% (0/1) of runs passed LLM Comparisons\\n\u274c Run 1/1 - LLM Comparisons\\n    ```\\n    Common knowledge and rationale fields are broadly aligned, but the feedback diverges: the expected advises citing EIA even for the generalized state-capacity comparison and to include exact state values, whereas the received suggests citing the Epoch AI report for the generalized claim and does not explicitly call for including the exact values. This is a substantive mismatch.\\n    ```\\n    ').passed\n\ntests/llm/claim_substantiator/test_common_knowledge.py:34: AssertionError"
      },
      "teardown": {
        "duration": 0.0013221660046838224,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "not_common_knowledge_state_comparison",
        "agent": {
          "name": "Claim Substantiator",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "Draft Report\n\nAssessing the U.S. Net Available Additional Power Capacity by 2030\n\nEstimating short-term increases in electricity generation within the United States and the ability to meet growth in A...",
          "paragraph": "Beyond the challenge of aggregated scale, a single site expected to demand a large amount of power also poses issues related to building necessary infrastructure in a timely manner[[10]](#footnote-9) ...",
          "chunk": "Beyond the challenge of aggregated scale, a single site expected to demand a large amount of power also poses issues related to building necessary infrastructure in a timely manner[[10]](#footnote-9) ...",
          "claim": "A 5 GW facility is comparable to the 2023 net summer generation capacity of Idaho (5.4 GW), Maine (5.3 GW), or New Hampshire (4.5 GW)",
          "cited_references": "# Can AI Scaling Continue Through 2030? - Epoch AI Report Extract\n\nSevilla, Jaime, Tamay Besiroglu, Ben Cottier, Josh You, Edu Rold\u00e1n, Pablo Villalobos, and Ege Erdil\nEpoch AI, August 20, 2024\n\n## Pow...",
          "domain_context": "\n## Domain Context\nConsider this user provided domain: ```Power systems and energy policy```\n\nWhen analyzing claims, consider domain-specific standards, terminology, and expectations. For example:\n- W...",
          "audience_context": "\n## Target Audience Context\nConsider this user provided target audience: ```Policy makers```\n\nWhen evaluating claims and evidence, consider audience-appropriate standards:\n- Adjust the rigor of substa..."
        },
        "expected_output": {
          "is_substantiated": false,
          "is_common_knowledge": false,
          "common_knowledge_rationale": "Specific state-level electricity capacity figures (e.g., 2023 net summer capacity for Idaho, Maine, New Hampshire) are not widely known outside energy statistics circles and require citation for a policy/research audience.",
          "rationale": "The cited Epoch AI report (Sevilla et al., 2024) does support that single data center campuses of 1\u20135 GW are plausible by 2030 and characterizes such facilities as unprecedentedly large. However, it does not provide or reference 2023 net summer generation capacity for Idaho, Maine, or New Hampshire, nor does it make the explicit comparison that a 5 GW facility is comparable to those states' capacities. The state capacity comparison relies on EIA data (cited in the draft as [13] and [14]), not on Sevilla et al. [12].",
          "feedback": "Add the appropriate EIA citations for 2023 net summer capacity by state (e.g., EIA state electricity profiles) and include the exact values for Idaho, Maine, and New Hampshire. Alternatively, rephrase to: \"A 5 GW facility would be on the order of a small U.S. state's net summer capacity,\" and cite EIA. Keep Sevilla et al. to substantiate the plausibility of 1\u20135 GW campuses; use EIA to substantiate the state comparison.",
          "severity": 4
        },
        "actual_outputs": [
          {
            "is_substantiated": false,
            "is_common_knowledge": false,
            "common_knowledge_rationale": "While experts may broadly recognize that a 5 GW load rivals the total capacity of some small U.S. states, the specific identification of Idaho, Maine, and New Hampshire and the precise 2023 net summer capacity figures are not general knowledge and require authoritative data (e.g., EIA).",
            "rationale": "The cited Epoch AI report states that single 1\u20135 GW facilities would rival the generation capacity of small U.S. states, but it does not provide the 2023 net summer capacity values, nor does it specifically reference Idaho (5.4 GW), Maine (5.3 GW), or New Hampshire (4.5 GW). It also does not specify the capacity metric (net summer vs. nameplate). Therefore, the specific numeric comparisons in the claim are not substantiated by the provided source.",
            "feedback": "Add or replace the citation with an authoritative source for state capacities (e.g., EIA state electricity profiles for 2023 net summer capacity) to support the specific numbers and states, or generalize the statement to \u201crivals small states\u2019 capacity\u201d and cite the Epoch AI report. Also clarify the capacity metric used (net summer vs. nameplate).",
            "severity": 3
          }
        ],
        "evaluation_config": {
          "strict_fields": [
            "severity",
            "is_substantiated",
            "is_common_knowledge"
          ],
          "llm_fields": [
            "rationale",
            "feedback",
            "common_knowledge_rationale"
          ],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": false,
          "rationale": "\u274c 0% (0/1) of runs passed Strict Comparisons\n\u274c Run 1/1 - Strict Comparisons\n    ```\n    Fields with differences with expected: {\n  \"values_changed\": {\n    \"root['severity']\": {\n      \"new_value\": 3,\n      \"old_value\": 4\n    }\n  }\n}\n    ```\n    \n\u274c 0% (0/1) of runs passed LLM Comparisons\n\u274c Run 1/1 - LLM Comparisons\n    ```\n    Common knowledge and rationale fields are broadly aligned, but the feedback diverges: the expected advises citing EIA even for the generalized state-capacity comparison and to include exact state values, whereas the received suggests citing the Epoch AI report for the generalized claim and does not explicitly call for including the exact values. This is a substantive mismatch.\n    ```\n    "
        }
      }
    },
    {
      "nodeid": "tests/llm/test_citation_detector.py::test_citation_detector_agent_cases[citation_case_1]",
      "lineno": 66,
      "outcome": "passed",
      "keywords": [
        "test_citation_detector_agent_cases[citation_case_1]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "citation_case_1",
        "test_citation_detector.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.000502833048813045,
        "outcome": "passed"
      },
      "call": {
        "duration": 14.79016687499825,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0005591249791905284,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "citation_case_1",
        "agent": {
          "name": "Citation Detector",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "# Effects of Widgets on System Performance\n\nThis study explores how widgets impact overall gadget performance metrics.\n\n## Introduction\nWidgets have been widely adopted across industries. Prior work s...",
          "bibliography": "1. Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.\n\n2. Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.\n\n3. Smith, A.; Anderson, T. (2017)...",
          "chunk": "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights."
        },
        "expected_output": {
          "citations": [
            {
              "text": "Smith (2020)",
              "type": "bibliography",
              "format": "author (year)",
              "needs_bibliography": true,
              "associated_bibliography": "Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
              "index_of_associated_bibliography": 1,
              "rationale": ""
            },
            {
              "text": "Doe and Roe (2019)",
              "type": "bibliography",
              "format": "author (year)",
              "needs_bibliography": true,
              "associated_bibliography": "Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
              "index_of_associated_bibliography": 2,
              "rationale": ""
            }
          ],
          "rationale": ""
        },
        "actual_outputs": [
          {
            "citations": [
              {
                "text": "Smith (2020)",
                "type": "bibliography",
                "format": "(Author, Year)",
                "needs_bibliography": true,
                "associated_bibliography": "Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
                "index_of_associated_bibliography": 1,
                "rationale": "Author-year in-text citation that matches a reference entry."
              },
              {
                "text": "Doe and Roe (2019)",
                "type": "bibliography",
                "format": "(Author and Author, Year)",
                "needs_bibliography": true,
                "associated_bibliography": "Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
                "index_of_associated_bibliography": 2,
                "rationale": "Author-year in-text citation that matches a reference entry."
              }
            ],
            "rationale": "The chunk includes author-year citations referring to entries in the References section."
          }
        ],
        "evaluation_config": {
          "strict_fields": {
            "citations": {
              "__all__": "{'index_of_associated_bibliography', 'text', 'associated_bibliography', 'needs_bibliography'}"
            }
          },
          "llm_fields": [],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\nNo fields require llm comparison"
        }
      }
    },
    {
      "nodeid": "tests/llm/test_citation_detector.py::test_citation_detector_agent_cases[citation_case_2]",
      "lineno": 66,
      "outcome": "passed",
      "keywords": [
        "test_citation_detector_agent_cases[citation_case_2]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "citation_case_2",
        "test_citation_detector.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.000297166989184916,
        "outcome": "passed"
      },
      "call": {
        "duration": 13.710187375021633,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0008070000330917537,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "citation_case_2",
        "agent": {
          "name": "Citation Detector",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "# Effects of Widgets on System Performance\n\nThis study explores how widgets impact overall gadget performance metrics.\n\n## Introduction\nWidgets have been widely adopted across industries. Prior work s...",
          "bibliography": "1. Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.\n\n2. Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.\n\n3. Smith, A.; Anderson, T. (2017)...",
          "chunk": "In this article, we will review what some of the other works in the field, including (Smith, 2017) have found in this domain."
        },
        "expected_output": {
          "citations": [
            {
              "text": "(Smith, 2017)",
              "type": "bibliography",
              "format": "(author, year)",
              "needs_bibliography": true,
              "associated_bibliography": "Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech.",
              "index_of_associated_bibliography": 3,
              "rationale": ""
            }
          ],
          "rationale": ""
        },
        "actual_outputs": [
          {
            "citations": [
              {
                "text": "(Smith, 2017)",
                "type": "bibliography",
                "format": "(Author, Year)",
                "needs_bibliography": true,
                "associated_bibliography": "Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech.",
                "index_of_associated_bibliography": 3,
                "rationale": "Parenthetical author-year reference matching a bibliography entry."
              }
            ],
            "rationale": "The chunk contains a parenthetical author-year citation indicating a reference to the bibliography."
          }
        ],
        "evaluation_config": {
          "strict_fields": {
            "citations": {
              "__all__": "{'index_of_associated_bibliography', 'text', 'associated_bibliography', 'needs_bibliography'}"
            }
          },
          "llm_fields": [],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\nNo fields require llm comparison"
        }
      }
    },
    {
      "nodeid": "tests/llm/test_citation_detector.py::test_citation_detector_agent_cases[citation_case_3]",
      "lineno": 66,
      "outcome": "passed",
      "keywords": [
        "test_citation_detector_agent_cases[citation_case_3]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "citation_case_3",
        "test_citation_detector.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0004384170169942081,
        "outcome": "passed"
      },
      "call": {
        "duration": 6.953197791997809,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.00046974996803328395,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "citation_case_3",
        "agent": {
          "name": "Citation Detector",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "# Effects of Widgets on System Performance\n\nThis study explores how widgets impact overall gadget performance metrics.\n\n## Introduction\nWidgets have been widely adopted across industries. Prior work s...",
          "bibliography": "1. Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.\n\n2. Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.\n\n3. Smith, A.; Anderson, T. (2017)...",
          "chunk": "We conducted experiments using standard gizmo benchmarks."
        },
        "expected_output": {
          "citations": [],
          "rationale": ""
        },
        "actual_outputs": [
          {
            "citations": [],
            "rationale": "No citation-like patterns (author-year, numeric brackets, footnotes, or URLs) appear in this chunk."
          }
        ],
        "evaluation_config": {
          "strict_fields": {
            "citations": {
              "__all__": "{'index_of_associated_bibliography', 'text', 'associated_bibliography', 'needs_bibliography'}"
            }
          },
          "llm_fields": [],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\nNo fields require llm comparison"
        }
      }
    },
    {
      "nodeid": "tests/llm/test_claim_detector.py::test_claim_detector_agent_cases[claim_case_1]",
      "lineno": 68,
      "outcome": "failed",
      "keywords": [
        "test_claim_detector_agent_cases[claim_case_1]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "claim_case_1",
        "test_claim_detector.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0002720829797908664,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0015153749845921993,
        "outcome": "failed",
        "crash": {
          "path": "/Users/ricardoschieck/.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
          "lineno": 256,
          "message": "KeyError: 'domain_context'"
        },
        "traceback": [
          {
            "path": "tests/llm/test_claim_detector.py",
            "lineno": 72,
            "message": ""
          },
          {
            "path": "lib/models/agent_test_case.py",
            "lineno": 70,
            "message": "in run"
          },
          {
            "path": "lib/models/agent.py",
            "lineno": 200,
            "message": "in apply"
          },
          {
            "path": "lib/models/agent.py",
            "lineno": 137,
            "message": "in _apply_without_tools"
          },
          {
            "path": "lib/models/agent.py",
            "lineno": 92,
            "message": "in prep_llm_args"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py",
            "lineno": 1188,
            "message": "in format_messages"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py",
            "lineno": 559,
            "message": "in format_messages"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py",
            "lineno": 592,
            "message": "in format"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/prompts/prompt.py",
            "lineno": 187,
            "message": "in format"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 190,
            "message": "in format"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/utils/formatting.py",
            "lineno": 33,
            "message": "in vformat"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 194,
            "message": "in vformat"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 234,
            "message": "in _vformat"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 299,
            "message": "in get_field"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 256,
            "message": "KeyError"
          }
        ],
        "longrepr": "case = AgentTestCase(name='claim_case_1', agent=<Agent(id=None, name='Claim Detector', version=None)>, response_model=<class ...iation', 'text'}}}, llm_fields={'claims': {'__all__': {'claim'}}}, ignore_fields=set(), evaluator_model='openai:gpt-5')\n\n    @pytest.mark.asyncio\n    @pytest.mark.parametrize(\"case\", _build_cases(), ids=lambda case: case.name)\n    async def test_claim_detector_agent_cases(case: AgentTestCase):\n>       await case.run()\n\ntests/llm/test_claim_detector.py:72: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nlib/models/agent_test_case.py:70: in run\n    results = await asyncio.gather(*tasks)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nlib/models/agent.py:200: in apply\n    return await self._apply_without_tools(prompt_kwargs, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nlib/models/agent.py:137: in _apply_without_tools\n    llm_with_structure, args = self.prep_llm_args(prompt_kwargs)\n                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nlib/models/agent.py:92: in prep_llm_args\n    messages = prompt_template.format_messages(**prompt_kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py:1188: in format_messages\n    message = message_template.format_messages(**kwargs)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py:559: in format_messages\n    return [self.format(**kwargs)]\n            ^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py:592: in format\n    text = self.prompt.format(**kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/prompts/prompt.py:187: in format\n    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:190: in format\n    return self.vformat(format_string, args, kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/utils/formatting.py:33: in vformat\n    return super().vformat(format_string, args, kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:194: in vformat\n    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:234: in _vformat\n    obj, arg_used = self.get_field(field_name, args, kwargs)\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:299: in get_field\n    obj = self.get_value(first, args, kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <langchain_core.utils.formatting.StrictFormatter object at 0x120a5fcb0>, key = 'domain_context'\nargs = ()\nkwargs = {'chunk': 'Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights.', 'full_document...f.\\n3. Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech.\\n'}\n\n    def get_value(self, key, args, kwargs):\n        if isinstance(key, int):\n            return args[key]\n        else:\n>           return kwargs[key]\n                   ^^^^^^^^^^^\nE           KeyError: 'domain_context'\n\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:256: KeyError"
      },
      "teardown": {
        "duration": 0.000286291993688792,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "claim_case_1",
        "agent": {
          "name": "Claim Detector",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "# Effects of Widgets on System Performance\n\nThis study explores how widgets impact overall gadget performance metrics.\n\n## Introduction\nWidgets have been widely adopted across industries. Prior work s...",
          "chunk": "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights."
        },
        "expected_output": {
          "claims": [
            {
              "text": "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights.",
              "claim": "Smith (2020) provides useful background/insights.",
              "needs_substantiation": true,
              "rationale": ""
            },
            {
              "text": "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights.",
              "claim": "Doe and Roe (2019) provides useful background/insights.",
              "needs_substantiation": true,
              "rationale": ""
            }
          ],
          "rationale": ""
        },
        "actual_outputs": [],
        "evaluation_config": {
          "strict_fields": {
            "claims": {
              "__all__": "{'needs_substantiation', 'text'}"
            }
          },
          "llm_fields": {
            "claims": {
              "__all__": "{'claim'}"
            }
          },
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": null
      }
    },
    {
      "nodeid": "tests/llm/test_claim_detector.py::test_claim_detector_agent_cases[claim_case_2]",
      "lineno": 68,
      "outcome": "failed",
      "keywords": [
        "test_claim_detector_agent_cases[claim_case_2]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "claim_case_2",
        "test_claim_detector.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.00021245802054181695,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0008432500180788338,
        "outcome": "failed",
        "crash": {
          "path": "/Users/ricardoschieck/.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
          "lineno": 256,
          "message": "KeyError: 'domain_context'"
        },
        "traceback": [
          {
            "path": "tests/llm/test_claim_detector.py",
            "lineno": 72,
            "message": ""
          },
          {
            "path": "lib/models/agent_test_case.py",
            "lineno": 70,
            "message": "in run"
          },
          {
            "path": "lib/models/agent.py",
            "lineno": 200,
            "message": "in apply"
          },
          {
            "path": "lib/models/agent.py",
            "lineno": 137,
            "message": "in _apply_without_tools"
          },
          {
            "path": "lib/models/agent.py",
            "lineno": 92,
            "message": "in prep_llm_args"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py",
            "lineno": 1188,
            "message": "in format_messages"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py",
            "lineno": 559,
            "message": "in format_messages"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py",
            "lineno": 592,
            "message": "in format"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/prompts/prompt.py",
            "lineno": 187,
            "message": "in format"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 190,
            "message": "in format"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/utils/formatting.py",
            "lineno": 33,
            "message": "in vformat"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 194,
            "message": "in vformat"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 234,
            "message": "in _vformat"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 299,
            "message": "in get_field"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 256,
            "message": "KeyError"
          }
        ],
        "longrepr": "case = AgentTestCase(name='claim_case_2', agent=<Agent(id=None, name='Claim Detector', version=None)>, response_model=<class ...iation', 'text'}}}, llm_fields={'claims': {'__all__': {'claim'}}}, ignore_fields=set(), evaluator_model='openai:gpt-5')\n\n    @pytest.mark.asyncio\n    @pytest.mark.parametrize(\"case\", _build_cases(), ids=lambda case: case.name)\n    async def test_claim_detector_agent_cases(case: AgentTestCase):\n>       await case.run()\n\ntests/llm/test_claim_detector.py:72: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nlib/models/agent_test_case.py:70: in run\n    results = await asyncio.gather(*tasks)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nlib/models/agent.py:200: in apply\n    return await self._apply_without_tools(prompt_kwargs, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nlib/models/agent.py:137: in _apply_without_tools\n    llm_with_structure, args = self.prep_llm_args(prompt_kwargs)\n                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nlib/models/agent.py:92: in prep_llm_args\n    messages = prompt_template.format_messages(**prompt_kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py:1188: in format_messages\n    message = message_template.format_messages(**kwargs)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py:559: in format_messages\n    return [self.format(**kwargs)]\n            ^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py:592: in format\n    text = self.prompt.format(**kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/prompts/prompt.py:187: in format\n    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:190: in format\n    return self.vformat(format_string, args, kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/utils/formatting.py:33: in vformat\n    return super().vformat(format_string, args, kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:194: in vformat\n    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:234: in _vformat\n    obj, arg_used = self.get_field(field_name, args, kwargs)\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:299: in get_field\n    obj = self.get_value(first, args, kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <langchain_core.utils.formatting.StrictFormatter object at 0x120a5fcb0>, key = 'domain_context'\nargs = ()\nkwargs = {'chunk': \"Of note, cellphones have a positive impact on the user's writing proficiency in most countries (Smith, 2017...f.\\n3. Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech.\\n'}\n\n    def get_value(self, key, args, kwargs):\n        if isinstance(key, int):\n            return args[key]\n        else:\n>           return kwargs[key]\n                   ^^^^^^^^^^^\nE           KeyError: 'domain_context'\n\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:256: KeyError"
      },
      "teardown": {
        "duration": 0.0002638750011101365,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "claim_case_2",
        "agent": {
          "name": "Claim Detector",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "# Effects of Widgets on System Performance\n\nThis study explores how widgets impact overall gadget performance metrics.\n\n## Introduction\nWidgets have been widely adopted across industries. Prior work s...",
          "chunk": "Of note, cellphones have a positive impact on the user's writing proficiency in most countries (Smith, 2017), making them one of the best widgets out there."
        },
        "expected_output": {
          "claims": [
            {
              "text": "cellphones have a positive impact on the user's writing proficiency in most countries (Smith, 2017)",
              "claim": "Cellphones positively affect users' writing proficiency in most countries.",
              "needs_substantiation": true,
              "rationale": ""
            },
            {
              "text": "making them one of the best widgets out there.",
              "claim": "Cellphones are one of the best widgets.",
              "needs_substantiation": true,
              "rationale": ""
            }
          ],
          "rationale": ""
        },
        "actual_outputs": [],
        "evaluation_config": {
          "strict_fields": {
            "claims": {
              "__all__": "{'needs_substantiation', 'text'}"
            }
          },
          "llm_fields": {
            "claims": {
              "__all__": "{'claim'}"
            }
          },
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": null
      }
    },
    {
      "nodeid": "tests/llm/test_claim_detector.py::test_claim_detector_agent_cases[claim_case_3_no_claims]",
      "lineno": 68,
      "outcome": "failed",
      "keywords": [
        "test_claim_detector_agent_cases[claim_case_3_no_claims]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "claim_case_3_no_claims",
        "test_claim_detector.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.00021174998255446553,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.0007761250017210841,
        "outcome": "failed",
        "crash": {
          "path": "/Users/ricardoschieck/.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
          "lineno": 256,
          "message": "KeyError: 'domain_context'"
        },
        "traceback": [
          {
            "path": "tests/llm/test_claim_detector.py",
            "lineno": 72,
            "message": ""
          },
          {
            "path": "lib/models/agent_test_case.py",
            "lineno": 70,
            "message": "in run"
          },
          {
            "path": "lib/models/agent.py",
            "lineno": 200,
            "message": "in apply"
          },
          {
            "path": "lib/models/agent.py",
            "lineno": 137,
            "message": "in _apply_without_tools"
          },
          {
            "path": "lib/models/agent.py",
            "lineno": 92,
            "message": "in prep_llm_args"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py",
            "lineno": 1188,
            "message": "in format_messages"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py",
            "lineno": 559,
            "message": "in format_messages"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py",
            "lineno": 592,
            "message": "in format"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/prompts/prompt.py",
            "lineno": 187,
            "message": "in format"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 190,
            "message": "in format"
          },
          {
            "path": ".venv/lib/python3.13/site-packages/langchain_core/utils/formatting.py",
            "lineno": 33,
            "message": "in vformat"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 194,
            "message": "in vformat"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 234,
            "message": "in _vformat"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 299,
            "message": "in get_field"
          },
          {
            "path": "../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py",
            "lineno": 256,
            "message": "KeyError"
          }
        ],
        "longrepr": "case = AgentTestCase(name='claim_case_3_no_claims', agent=<Agent(id=None, name='Claim Detector', version=None)>, response_mod...iation', 'text'}}}, llm_fields={'claims': {'__all__': {'claim'}}}, ignore_fields=set(), evaluator_model='openai:gpt-5')\n\n    @pytest.mark.asyncio\n    @pytest.mark.parametrize(\"case\", _build_cases(), ids=lambda case: case.name)\n    async def test_claim_detector_agent_cases(case: AgentTestCase):\n>       await case.run()\n\ntests/llm/test_claim_detector.py:72: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nlib/models/agent_test_case.py:70: in run\n    results = await asyncio.gather(*tasks)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nlib/models/agent.py:200: in apply\n    return await self._apply_without_tools(prompt_kwargs, config)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nlib/models/agent.py:137: in _apply_without_tools\n    llm_with_structure, args = self.prep_llm_args(prompt_kwargs)\n                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nlib/models/agent.py:92: in prep_llm_args\n    messages = prompt_template.format_messages(**prompt_kwargs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py:1188: in format_messages\n    message = message_template.format_messages(**kwargs)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py:559: in format_messages\n    return [self.format(**kwargs)]\n            ^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/prompts/chat.py:592: in format\n    text = self.prompt.format(**kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/prompts/prompt.py:187: in format\n    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:190: in format\n    return self.vformat(format_string, args, kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/langchain_core/utils/formatting.py:33: in vformat\n    return super().vformat(format_string, args, kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:194: in vformat\n    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:234: in _vformat\n    obj, arg_used = self.get_field(field_name, args, kwargs)\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:299: in get_field\n    obj = self.get_value(first, args, kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <langchain_core.utils.formatting.StrictFormatter object at 0x120a5fcb0>, key = 'domain_context'\nargs = ()\nkwargs = {'chunk': '# Effects of Widgets on System Performance', 'full_document': '# Effects of Widgets on System Performance\\n...f.\\n3. Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech.\\n'}\n\n    def get_value(self, key, args, kwargs):\n        if isinstance(key, int):\n            return args[key]\n        else:\n>           return kwargs[key]\n                   ^^^^^^^^^^^\nE           KeyError: 'domain_context'\n\n../../../../.local/share/uv/python/cpython-3.13.7-macos-aarch64-none/lib/python3.13/string.py:256: KeyError"
      },
      "teardown": {
        "duration": 0.0002893329947255552,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "claim_case_3_no_claims",
        "agent": {
          "name": "Claim Detector",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "# Effects of Widgets on System Performance\n\nThis study explores how widgets impact overall gadget performance metrics.\n\n## Introduction\nWidgets have been widely adopted across industries. Prior work s...",
          "chunk": "# Effects of Widgets on System Performance"
        },
        "expected_output": {
          "claims": [],
          "rationale": ""
        },
        "actual_outputs": [],
        "evaluation_config": {
          "strict_fields": {
            "claims": {
              "__all__": "{'needs_substantiation', 'text'}"
            }
          },
          "llm_fields": {
            "claims": {
              "__all__": "{'claim'}"
            }
          },
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": null
      }
    },
    {
      "nodeid": "tests/llm/test_document_chunker.py::test_document_chunker_agent_cases[chunker_case_basic]",
      "lineno": 55,
      "outcome": "passed",
      "keywords": [
        "test_document_chunker_agent_cases[chunker_case_basic]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "chunker_case_basic",
        "test_document_chunker.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.00021525000920519233,
        "outcome": "passed"
      },
      "call": {
        "duration": 81.58887616597349,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.001690792036242783,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "chunker_case_basic",
        "agent": {
          "name": "Document Chunker",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "# Effects of Widgets on System Performance\n\nThis study explores how widgets impact overall gadget performance metrics.\n\n## Introduction\nWidgets have been widely adopted across industries. Prior work s..."
        },
        "expected_output": {
          "paragraphs": [
            {
              "chunks": [
                "# Effects of Widgets on System Performance",
                "This study explores how widgets impact overall gadget performance metrics."
              ]
            },
            {
              "chunks": [
                "## Introduction",
                "Widgets have been widely adopted across industries.",
                "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights.",
                "In this article, we will review what some of the other works in the field, including (Smith, 2017) have found in this domain."
              ]
            },
            {
              "chunks": [
                "## Methods",
                "We conducted experiments using standard gizmo benchmarks."
              ]
            },
            {
              "chunks": [
                "## Results",
                "Widgets improved throughput but increased latency under certain configurations.",
                "Of note, cellphones have a positive impact on the user's writing proficiency in most countries (Smith, 2017), making them one of the best widgets out there."
              ]
            },
            {
              "chunks": [
                "## Discussion",
                "Findings align with prior work."
              ]
            },
            {
              "chunks": [
                "## References",
                "1. Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
                "2. Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
                "3. Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech."
              ]
            }
          ]
        },
        "actual_outputs": [
          {
            "paragraphs": [
              {
                "chunks": [
                  "# Effects of Widgets on System Performance",
                  "This study explores how widgets impact overall gadget performance metrics."
                ]
              },
              {
                "chunks": [
                  "## Introduction",
                  "Widgets have been widely adopted across industries.",
                  "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights.",
                  "In this article, we will review what some of the other works in the field, including (Smith, 2017) have found in this domain."
                ]
              },
              {
                "chunks": [
                  "## Methods",
                  "We conducted experiments using standard gizmo benchmarks."
                ]
              },
              {
                "chunks": [
                  "## Results",
                  "Widgets improved throughput but increased latency under certain configurations.",
                  "Of note, cellphones have a positive impact on the user's writing proficiency in most countries (Smith, 2017), making them one of the best widgets out there."
                ]
              },
              {
                "chunks": [
                  "## Discussion",
                  "Findings align with prior work."
                ]
              },
              {
                "chunks": [
                  "## References",
                  "1. Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
                  "2. Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
                  "3. Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech."
                ]
              }
            ]
          },
          {
            "paragraphs": [
              {
                "chunks": [
                  "# Effects of Widgets on System Performance",
                  "This study explores how widgets impact overall gadget performance metrics."
                ]
              },
              {
                "chunks": [
                  "## Introduction",
                  "Widgets have been widely adopted across industries.",
                  "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights.",
                  "In this article, we will review what some of the other works in the field, including (Smith, 2017) have found in this domain."
                ]
              },
              {
                "chunks": [
                  "## Methods",
                  "We conducted experiments using standard gizmo benchmarks."
                ]
              },
              {
                "chunks": [
                  "## Results",
                  "Widgets improved throughput but increased latency under certain configurations.",
                  "Of note, cellphones have a positive impact on the user's writing proficiency in most countries (Smith, 2017), making them one of the best widgets out there."
                ]
              },
              {
                "chunks": [
                  "## Discussion",
                  "Findings align with prior work."
                ]
              },
              {
                "chunks": [
                  "## References",
                  "1. Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
                  "2. Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
                  "3. Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech."
                ]
              }
            ]
          },
          {
            "paragraphs": [
              {
                "chunks": [
                  "# Effects of Widgets on System Performance",
                  "This study explores how widgets impact overall gadget performance metrics."
                ]
              },
              {
                "chunks": [
                  "## Introduction",
                  "Widgets have been widely adopted across industries.",
                  "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights.",
                  "In this article, we will review what some of the other works in the field, including (Smith, 2017) have found in this domain."
                ]
              },
              {
                "chunks": [
                  "## Methods",
                  "We conducted experiments using standard gizmo benchmarks."
                ]
              },
              {
                "chunks": [
                  "## Results",
                  "Widgets improved throughput but increased latency under certain configurations.",
                  "Of note, cellphones have a positive impact on the user's writing proficiency in most countries (Smith, 2017), making them one of the best widgets out there."
                ]
              },
              {
                "chunks": [
                  "## Discussion",
                  "Findings align with prior work."
                ]
              },
              {
                "chunks": [
                  "## References",
                  "1. Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
                  "2. Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
                  "3. Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech."
                ]
              }
            ]
          },
          {
            "paragraphs": [
              {
                "chunks": [
                  "# Effects of Widgets on System Performance",
                  "This study explores how widgets impact overall gadget performance metrics."
                ]
              },
              {
                "chunks": [
                  "## Introduction",
                  "Widgets have been widely adopted across industries.",
                  "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights.",
                  "In this article, we will review what some of the other works in the field, including (Smith, 2017) have found in this domain."
                ]
              },
              {
                "chunks": [
                  "## Methods",
                  "We conducted experiments using standard gizmo benchmarks."
                ]
              },
              {
                "chunks": [
                  "## Results",
                  "Widgets improved throughput but increased latency under certain configurations.",
                  "Of note, cellphones have a positive impact on the user's writing proficiency in most countries (Smith, 2017), making them one of the best widgets out there."
                ]
              },
              {
                "chunks": [
                  "## Discussion",
                  "Findings align with prior work."
                ]
              },
              {
                "chunks": [
                  "## References",
                  "1. Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
                  "2. Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
                  "3. Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech."
                ]
              }
            ]
          },
          {
            "paragraphs": [
              {
                "chunks": [
                  "# Effects of Widgets on System Performance",
                  "This study explores how widgets impact overall gadget performance metrics."
                ]
              },
              {
                "chunks": [
                  "## Introduction",
                  "Widgets have been widely adopted across industries.",
                  "Prior work such as Smith (2020) and Doe and Roe (2019) provide useful background/insights.",
                  "In this article, we will review what some of the other works in the field, including (Smith, 2017) have found in this domain."
                ]
              },
              {
                "chunks": [
                  "## Methods",
                  "We conducted experiments using standard gizmo benchmarks."
                ]
              },
              {
                "chunks": [
                  "## Results",
                  "Widgets improved throughput but increased latency under certain configurations.",
                  "Of note, cellphones have a positive impact on the user's writing proficiency in most countries (Smith, 2017), making them one of the best widgets out there."
                ]
              },
              {
                "chunks": [
                  "## Discussion",
                  "Findings align with prior work."
                ]
              },
              {
                "chunks": [
                  "## References",
                  "1. Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
                  "2. Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
                  "3. Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech."
                ]
              }
            ]
          }
        ],
        "evaluation_config": {
          "strict_fields": {
            "paragraphs": {
              "__all__": "{'chunks'}"
            }
          },
          "llm_fields": {
            "paragraphs": {
              "__all__": "{'chunks'}"
            }
          },
          "evaluator_model": "openai:gpt-5",
          "run_count": 5
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (5/5) of runs passed Strict Comparisons\n\u2705 100% (5/5) of runs passed LLM Comparisons"
        }
      }
    },
    {
      "nodeid": "tests/llm/test_document_chunker.py::test_document_chunker_agent_cases[chunker_case_single_paragraph]",
      "lineno": 55,
      "outcome": "failed",
      "keywords": [
        "test_document_chunker_agent_cases[chunker_case_single_paragraph]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "chunker_case_single_paragraph",
        "test_document_chunker.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0007474170415662229,
        "outcome": "passed"
      },
      "call": {
        "duration": 80.94333270803327,
        "outcome": "failed",
        "crash": {
          "path": "/Users/ricardoschieck/repos/AE Studio/Rand/rand-ai-reviewer/tests/llm/test_document_chunker.py",
          "lineno": 65,
          "message": "AssertionError: chunker_case_single_paragraph: \u274c 0% (0/5) of runs passed Strict Comparisons\n  \u274c Run 1/5 - Strict Comparisons\n      ```\n      Fields with differences with expected: {\n    \"values_changed\": {\n      \"root['paragraphs'][0]\": {\n        \"new_value\": {\n          \"chunks\": [\n            \"The Effects of Widgets on Gadgets\"\n          ]\n        },\n        \"old_value\": {\n          \"chunks\": [\n            \"The Effects of Widgets on Gadgets\",\n            \"Smith, J. (2020)\",\n            \"Abstract\",\n            \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n            \"We present experimental results and discuss implications for widget deployment.\"\n          ]\n        }\n      }\n    },\n    \"iterable_item_added\": {\n      \"root['paragraphs'][1]\": {\n        \"chunks\": [\n          \"Smith, J. (2020)\"\n        ]\n      },\n      \"root['paragraphs'][2]\": {\n        \"chunks\": [\n          \"Abstract\",\n          \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n          \"We present experimental results and discuss implications for widget deployment.\"\n        ]\n      }\n    }\n  }\n      ```\n      \n  \u274c Run 2/5 - Strict Comparisons\n      ```\n      Fields with differences with expected: {\n    \"values_changed\": {\n      \"root['paragraphs'][0]\": {\n        \"new_value\": {\n          \"chunks\": [\n            \"The Effects of Widgets on Gadgets\"\n          ]\n        },\n        \"old_value\": {\n          \"chunks\": [\n            \"The Effects of Widgets on Gadgets\",\n            \"Smith, J. (2020)\",\n            \"Abstract\",\n            \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n            \"We present experimental results and discuss implications for widget deployment.\"\n          ]\n        }\n      }\n    },\n    \"iterable_item_added\": {\n      \"root['paragraphs'][1]\": {\n        \"chunks\": [\n          \"Smith, J. (2020)\"\n        ]\n      },\n      \"root['paragraphs'][2]\": {\n        \"chunks\": [\n          \"Abstract\",\n          \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n          \"We present experimental results and discuss implications for widget deployment.\"\n        ]\n      }\n    }\n  }\n      ```\n      \n  \u274c Run 3/5 - Strict Comparisons\n      ```\n      Fields with differences with expected: {\n    \"values_changed\": {\n      \"root['paragraphs'][0]\": {\n        \"new_value\": {\n          \"chunks\": [\n            \"The Effects of Widgets on Gadgets\"\n          ]\n        },\n        \"old_value\": {\n          \"chunks\": [\n            \"The Effects of Widgets on Gadgets\",\n            \"Smith, J. (2020)\",\n            \"Abstract\",\n            \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n            \"We present experimental results and discuss implications for widget deployment.\"\n          ]\n        }\n      }\n    },\n    \"iterable_item_added\": {\n      \"root['paragraphs'][1]\": {\n        \"chunks\": [\n          \"Smith, J. (2020)\"\n        ]\n      },\n      \"root['paragraphs'][2]\": {\n        \"chunks\": [\n          \"Abstract\",\n          \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n          \"We present experimental results and discuss implications for widget deployment.\"\n        ]\n      }\n    }\n  }\n      ```\n      \n  \u274c Run 4/5 - Strict Comparisons\n      ```\n      Fields with differences with expected: {\n    \"values_changed\": {\n      \"root['paragraphs'][0]\": {\n        \"new_value\": {\n          \"chunks\": [\n            \"The Effects of Widgets on Gadgets\"\n          ]\n        },\n        \"old_value\": {\n          \"chunks\": [\n            \"The Effects of Widgets on Gadgets\",\n            \"Smith, J. (2020)\",\n            \"Abstract\",\n            \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n            \"We present experimental results and discuss implications for widget deployment.\"\n          ]\n        }\n      }\n    },\n    \"iterable_item_added\": {\n      \"root['paragraphs'][1]\": {\n        \"chunks\": [\n          \"Smith, J. (2020)\"\n        ]\n      },\n      \"root['paragraphs'][2]\": {\n        \"chunks\": [\n          \"Abstract\"\n        ]\n      },\n      \"root['paragraphs'][3]\": {\n        \"chunks\": [\n          \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n          \" We present experimental results and discuss implications for widget deployment.\"\n        ]\n      }\n    }\n  }\n      ```\n      \n  \u274c Run 5/5 - Strict Comparisons\n      ```\n      Fields with differences with expected: {\n    \"values_changed\": {\n      \"root['paragraphs'][0]\": {\n        \"new_value\": {\n          \"chunks\": [\n            \"The Effects of Widgets on Gadgets\"\n          ]\n        },\n        \"old_value\": {\n          \"chunks\": [\n            \"The Effects of Widgets on Gadgets\",\n            \"Smith, J. (2020)\",\n            \"Abstract\",\n            \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n            \"We present experimental results and discuss implications for widget deployment.\"\n          ]\n        }\n      }\n    },\n    \"iterable_item_added\": {\n      \"root['paragraphs'][1]\": {\n        \"chunks\": [\n          \"Smith, J. (2020)\"\n        ]\n      },\n      \"root['paragraphs'][2]\": {\n        \"chunks\": [\n          \"Abstract\\nThis paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n          \"We present experimental results and discuss implications for widget deployment.\"\n        ]\n      }\n    }\n  }\n      ```\n      \n  \u274c 0% (0/5) of runs passed LLM Comparisons\n  \u274c Run 1/5 - LLM Comparisons\n      ```\n      Paragraph count differs (expected 1 paragraph with all chunks vs received 3 paragraphs). Despite matching chunk content overall, differing list counts cause a fail.\n      ```\n      \n  \u274c Run 2/5 - LLM Comparisons\n      ```\n      Paragraphs list count differs (expected 1 paragraph, received 3). Although chunk content matches, the structure does not, so it fails.\n      ```\n      \n  \u274c Run 3/5 - LLM Comparisons\n      ```\n      Paragraph counts differ (expected 1 paragraph with all 5 chunks; received 3 separate paragraphs). Even if all chunk texts are present, the list-length mismatch fails the comparison.\n      ```\n      \n  \u274c Run 4/5 - LLM Comparisons\n      ```\n      Counts differ in the list-like 'paragraphs' field: expected 1 paragraph with 5 chunks; received 4 separate paragraphs. Despite matching chunk texts, the structure does not match, so it fails.\n      ```\n      \n  \u274c Run 5/5 - LLM Comparisons\n      ```\n      Paragraph count differs (expected 1 vs received 3). Also the expected standalone chunk 'Abstract' is missing\u2014it's merged with the next sentence\u2014so the chunk count (5 expected vs 4 received) and items do not match.\n      ```\n      \nassert False\n +  where False = EvaluationResult(passed=False, rationale='\u274c 0% (0/5) of runs passed Strict Comparisons\\n\u274c Run 1/5 - Strict Comparisons\\n    ```\\n    Fields with differences with expected: {\\n  \"values_changed\": {\\n    \"root[\\'paragraphs\\'][0]\": {\\n      \"new_value\": {\\n        \"chunks\": [\\n          \"The Effects of Widgets on Gadgets\"\\n        ]\\n      },\\n      \"old_value\": {\\n        \"chunks\": [\\n          \"The Effects of Widgets on Gadgets\",\\n          \"Smith, J. (2020)\",\\n          \"Abstract\",\\n          \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\\n          \"We present experimental results and discuss implications for widget deployment.\"\\n        ]\\n      }\\n    }\\n  },\\n  \"iterable_item_added\": {\\n    \"root[\\'paragraphs\\'][1]\": {\\n      \"chunks\": [\\n        \"Smith, J. (2020)\"\\n      ]\\n    },\\n    \"root[\\'paragraphs\\'][2]\": {\\n      \"chunks\": [\\n        \"Abstract\",\\n        \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\\n        \"We present experimental results and discuss implications for widget deployment.\"\\n      ]\\n    }\\...LM Comparisons\\n\u274c Run 1/5 - LLM Comparisons\\n    ```\\n    Paragraph count differs (expected 1 paragraph with all chunks vs received 3 paragraphs). Despite matching chunk content overall, differing list counts cause a fail.\\n    ```\\n    \\n\u274c Run 2/5 - LLM Comparisons\\n    ```\\n    Paragraphs list count differs (expected 1 paragraph, received 3). Although chunk content matches, the structure does not, so it fails.\\n    ```\\n    \\n\u274c Run 3/5 - LLM Comparisons\\n    ```\\n    Paragraph counts differ (expected 1 paragraph with all 5 chunks; received 3 separate paragraphs). Even if all chunk texts are present, the list-length mismatch fails the comparison.\\n    ```\\n    \\n\u274c Run 4/5 - LLM Comparisons\\n    ```\\n    Counts differ in the list-like \\'paragraphs\\' field: expected 1 paragraph with 5 chunks; received 4 separate paragraphs. Despite matching chunk texts, the structure does not match, so it fails.\\n    ```\\n    \\n\u274c Run 5/5 - LLM Comparisons\\n    ```\\n    Paragraph count differs (expected 1 vs received 3). Also the expected standalone chunk \\'Abstract\\' is missing\u2014it\\'s merged with the next sentence\u2014so the chunk count (5 expected vs 4 received) and items do not match.\\n    ```\\n    ').passed"
        },
        "traceback": [
          {
            "path": "tests/llm/test_document_chunker.py",
            "lineno": 65,
            "message": "AssertionError"
          }
        ],
        "longrepr": "case = AgentTestCase(name='chunker_case_single_paragraph', agent=<Agent(id=None, name='Document Chunker', version=None)>, res... {'chunks'}}}, llm_fields={'paragraphs': {'__all__': {'chunks'}}}, ignore_fields=set(), evaluator_model='openai:gpt-5')\n\n    @pytest.mark.asyncio\n    @pytest.mark.parametrize(\"case\", _build_cases(), ids=lambda case: case.name)\n    async def test_document_chunker_agent_cases(case: AgentTestCase):\n        await case.run()\n        eval_result = await case.compare_results()\n    \n        # Store eval_result for reporting\n        case._eval_result = eval_result\n    \n>       assert eval_result.passed, f\"{case.name}: {eval_result.rationale}\"\nE       AssertionError: chunker_case_single_paragraph: \u274c 0% (0/5) of runs passed Strict Comparisons\nE         \u274c Run 1/5 - Strict Comparisons\nE             ```\nE             Fields with differences with expected: {\nE           \"values_changed\": {\nE             \"root['paragraphs'][0]\": {\nE               \"new_value\": {\nE                 \"chunks\": [\nE                   \"The Effects of Widgets on Gadgets\"\nE                 ]\nE               },\nE               \"old_value\": {\nE                 \"chunks\": [\nE                   \"The Effects of Widgets on Gadgets\",\nE                   \"Smith, J. (2020)\",\nE                   \"Abstract\",\nE                   \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\nE                   \"We present experimental results and discuss implications for widget deployment.\"\nE                 ]\nE               }\nE             }\nE           },\nE           \"iterable_item_added\": {\nE             \"root['paragraphs'][1]\": {\nE               \"chunks\": [\nE                 \"Smith, J. (2020)\"\nE               ]\nE             },\nE             \"root['paragraphs'][2]\": {\nE               \"chunks\": [\nE                 \"Abstract\",\nE                 \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\nE                 \"We present experimental results and discuss implications for widget deployment.\"\nE               ]\nE             }\nE           }\nE         }\nE             ```\nE             \nE         \u274c Run 2/5 - Strict Comparisons\nE             ```\nE             Fields with differences with expected: {\nE           \"values_changed\": {\nE             \"root['paragraphs'][0]\": {\nE               \"new_value\": {\nE                 \"chunks\": [\nE                   \"The Effects of Widgets on Gadgets\"\nE                 ]\nE               },\nE               \"old_value\": {\nE                 \"chunks\": [\nE                   \"The Effects of Widgets on Gadgets\",\nE                   \"Smith, J. (2020)\",\nE                   \"Abstract\",\nE                   \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\nE                   \"We present experimental results and discuss implications for widget deployment.\"\nE                 ]\nE               }\nE             }\nE           },\nE           \"iterable_item_added\": {\nE             \"root['paragraphs'][1]\": {\nE               \"chunks\": [\nE                 \"Smith, J. (2020)\"\nE               ]\nE             },\nE             \"root['paragraphs'][2]\": {\nE               \"chunks\": [\nE                 \"Abstract\",\nE                 \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\nE                 \"We present experimental results and discuss implications for widget deployment.\"\nE               ]\nE             }\nE           }\nE         }\nE             ```\nE             \nE         \u274c Run 3/5 - Strict Comparisons\nE             ```\nE             Fields with differences with expected: {\nE           \"values_changed\": {\nE             \"root['paragraphs'][0]\": {\nE               \"new_value\": {\nE                 \"chunks\": [\nE                   \"The Effects of Widgets on Gadgets\"\nE                 ]\nE               },\nE               \"old_value\": {\nE                 \"chunks\": [\nE                   \"The Effects of Widgets on Gadgets\",\nE                   \"Smith, J. (2020)\",\nE                   \"Abstract\",\nE                   \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\nE                   \"We present experimental results and discuss implications for widget deployment.\"\nE                 ]\nE               }\nE             }\nE           },\nE           \"iterable_item_added\": {\nE             \"root['paragraphs'][1]\": {\nE               \"chunks\": [\nE                 \"Smith, J. (2020)\"\nE               ]\nE             },\nE             \"root['paragraphs'][2]\": {\nE               \"chunks\": [\nE                 \"Abstract\",\nE                 \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\nE                 \"We present experimental results and discuss implications for widget deployment.\"\nE               ]\nE             }\nE           }\nE         }\nE             ```\nE             \nE         \u274c Run 4/5 - Strict Comparisons\nE             ```\nE             Fields with differences with expected: {\nE           \"values_changed\": {\nE             \"root['paragraphs'][0]\": {\nE               \"new_value\": {\nE                 \"chunks\": [\nE                   \"The Effects of Widgets on Gadgets\"\nE                 ]\nE               },\nE               \"old_value\": {\nE                 \"chunks\": [\nE                   \"The Effects of Widgets on Gadgets\",\nE                   \"Smith, J. (2020)\",\nE                   \"Abstract\",\nE                   \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\nE                   \"We present experimental results and discuss implications for widget deployment.\"\nE                 ]\nE               }\nE             }\nE           },\nE           \"iterable_item_added\": {\nE             \"root['paragraphs'][1]\": {\nE               \"chunks\": [\nE                 \"Smith, J. (2020)\"\nE               ]\nE             },\nE             \"root['paragraphs'][2]\": {\nE               \"chunks\": [\nE                 \"Abstract\"\nE               ]\nE             },\nE             \"root['paragraphs'][3]\": {\nE               \"chunks\": [\nE                 \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\nE                 \" We present experimental results and discuss implications for widget deployment.\"\nE               ]\nE             }\nE           }\nE         }\nE             ```\nE             \nE         \u274c Run 5/5 - Strict Comparisons\nE             ```\nE             Fields with differences with expected: {\nE           \"values_changed\": {\nE             \"root['paragraphs'][0]\": {\nE               \"new_value\": {\nE                 \"chunks\": [\nE                   \"The Effects of Widgets on Gadgets\"\nE                 ]\nE               },\nE               \"old_value\": {\nE                 \"chunks\": [\nE                   \"The Effects of Widgets on Gadgets\",\nE                   \"Smith, J. (2020)\",\nE                   \"Abstract\",\nE                   \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\nE                   \"We present experimental results and discuss implications for widget deployment.\"\nE                 ]\nE               }\nE             }\nE           },\nE           \"iterable_item_added\": {\nE             \"root['paragraphs'][1]\": {\nE               \"chunks\": [\nE                 \"Smith, J. (2020)\"\nE               ]\nE             },\nE             \"root['paragraphs'][2]\": {\nE               \"chunks\": [\nE                 \"Abstract\\nThis paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\nE                 \"We present experimental results and discuss implications for widget deployment.\"\nE               ]\nE             }\nE           }\nE         }\nE             ```\nE             \nE         \u274c 0% (0/5) of runs passed LLM Comparisons\nE         \u274c Run 1/5 - LLM Comparisons\nE             ```\nE             Paragraph count differs (expected 1 paragraph with all chunks vs received 3 paragraphs). Despite matching chunk content overall, differing list counts cause a fail.\nE             ```\nE             \nE         \u274c Run 2/5 - LLM Comparisons\nE             ```\nE             Paragraphs list count differs (expected 1 paragraph, received 3). Although chunk content matches, the structure does not, so it fails.\nE             ```\nE             \nE         \u274c Run 3/5 - LLM Comparisons\nE             ```\nE             Paragraph counts differ (expected 1 paragraph with all 5 chunks; received 3 separate paragraphs). Even if all chunk texts are present, the list-length mismatch fails the comparison.\nE             ```\nE             \nE         \u274c Run 4/5 - LLM Comparisons\nE             ```\nE             Counts differ in the list-like 'paragraphs' field: expected 1 paragraph with 5 chunks; received 4 separate paragraphs. Despite matching chunk texts, the structure does not match, so it fails.\nE             ```\nE             \nE         \u274c Run 5/5 - LLM Comparisons\nE             ```\nE             Paragraph count differs (expected 1 vs received 3). Also the expected standalone chunk 'Abstract' is missing\u2014it's merged with the next sentence\u2014so the chunk count (5 expected vs 4 received) and items do not match.\nE             ```\nE             \nE       assert False\nE        +  where False = EvaluationResult(passed=False, rationale='\u274c 0% (0/5) of runs passed Strict Comparisons\\n\u274c Run 1/5 - Strict Comparisons\\n    ```\\n    Fields with differences with expected: {\\n  \"values_changed\": {\\n    \"root[\\'paragraphs\\'][0]\": {\\n      \"new_value\": {\\n        \"chunks\": [\\n          \"The Effects of Widgets on Gadgets\"\\n        ]\\n      },\\n      \"old_value\": {\\n        \"chunks\": [\\n          \"The Effects of Widgets on Gadgets\",\\n          \"Smith, J. (2020)\",\\n          \"Abstract\",\\n          \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\\n          \"We present experimental results and discuss implications for widget deployment.\"\\n        ]\\n      }\\n    }\\n  },\\n  \"iterable_item_added\": {\\n    \"root[\\'paragraphs\\'][1]\": {\\n      \"chunks\": [\\n        \"Smith, J. (2020)\"\\n      ]\\n    },\\n    \"root[\\'paragraphs\\'][2]\": {\\n      \"chunks\": [\\n        \"Abstract\",\\n        \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\\n        \"We present experimental results and discuss implications for widget deployment.\"\\n      ]\\n    }\\...LM Comparisons\\n\u274c Run 1/5 - LLM Comparisons\\n    ```\\n    Paragraph count differs (expected 1 paragraph with all chunks vs received 3 paragraphs). Despite matching chunk content overall, differing list counts cause a fail.\\n    ```\\n    \\n\u274c Run 2/5 - LLM Comparisons\\n    ```\\n    Paragraphs list count differs (expected 1 paragraph, received 3). Although chunk content matches, the structure does not, so it fails.\\n    ```\\n    \\n\u274c Run 3/5 - LLM Comparisons\\n    ```\\n    Paragraph counts differ (expected 1 paragraph with all 5 chunks; received 3 separate paragraphs). Even if all chunk texts are present, the list-length mismatch fails the comparison.\\n    ```\\n    \\n\u274c Run 4/5 - LLM Comparisons\\n    ```\\n    Counts differ in the list-like \\'paragraphs\\' field: expected 1 paragraph with 5 chunks; received 4 separate paragraphs. Despite matching chunk texts, the structure does not match, so it fails.\\n    ```\\n    \\n\u274c Run 5/5 - LLM Comparisons\\n    ```\\n    Paragraph count differs (expected 1 vs received 3). Also the expected standalone chunk \\'Abstract\\' is missing\u2014it\\'s merged with the next sentence\u2014so the chunk count (5 expected vs 4 received) and items do not match.\\n    ```\\n    ').passed\n\ntests/llm/test_document_chunker.py:65: AssertionError"
      },
      "teardown": {
        "duration": 0.00823737500468269,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "chunker_case_single_paragraph",
        "agent": {
          "name": "Document Chunker",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "The Effects of Widgets on Gadgets\n\nSmith, J. (2020)\n\nAbstract\nThis paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency. We present e..."
        },
        "expected_output": {
          "paragraphs": [
            {
              "chunks": [
                "The Effects of Widgets on Gadgets",
                "Smith, J. (2020)",
                "Abstract",
                "This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.",
                "We present experimental results and discuss implications for widget deployment."
              ]
            }
          ]
        },
        "actual_outputs": [
          {
            "paragraphs": [
              {
                "chunks": [
                  "The Effects of Widgets on Gadgets"
                ]
              },
              {
                "chunks": [
                  "Smith, J. (2020)"
                ]
              },
              {
                "chunks": [
                  "Abstract",
                  "This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.",
                  "We present experimental results and discuss implications for widget deployment."
                ]
              }
            ]
          },
          {
            "paragraphs": [
              {
                "chunks": [
                  "The Effects of Widgets on Gadgets"
                ]
              },
              {
                "chunks": [
                  "Smith, J. (2020)"
                ]
              },
              {
                "chunks": [
                  "Abstract",
                  "This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.",
                  "We present experimental results and discuss implications for widget deployment."
                ]
              }
            ]
          },
          {
            "paragraphs": [
              {
                "chunks": [
                  "The Effects of Widgets on Gadgets"
                ]
              },
              {
                "chunks": [
                  "Smith, J. (2020)"
                ]
              },
              {
                "chunks": [
                  "Abstract",
                  "This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.",
                  "We present experimental results and discuss implications for widget deployment."
                ]
              }
            ]
          },
          {
            "paragraphs": [
              {
                "chunks": [
                  "The Effects of Widgets on Gadgets"
                ]
              },
              {
                "chunks": [
                  "Smith, J. (2020)"
                ]
              },
              {
                "chunks": [
                  "Abstract"
                ]
              },
              {
                "chunks": [
                  "This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.",
                  " We present experimental results and discuss implications for widget deployment."
                ]
              }
            ]
          },
          {
            "paragraphs": [
              {
                "chunks": [
                  "The Effects of Widgets on Gadgets"
                ]
              },
              {
                "chunks": [
                  "Smith, J. (2020)"
                ]
              },
              {
                "chunks": [
                  "Abstract\nThis paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.",
                  "We present experimental results and discuss implications for widget deployment."
                ]
              }
            ]
          }
        ],
        "evaluation_config": {
          "strict_fields": {
            "paragraphs": {
              "__all__": "{'chunks'}"
            }
          },
          "llm_fields": {
            "paragraphs": {
              "__all__": "{'chunks'}"
            }
          },
          "evaluator_model": "openai:gpt-5",
          "run_count": 5
        },
        "evaluation_result": {
          "passed": false,
          "rationale": "\u274c 0% (0/5) of runs passed Strict Comparisons\n\u274c Run 1/5 - Strict Comparisons\n    ```\n    Fields with differences with expected: {\n  \"values_changed\": {\n    \"root['paragraphs'][0]\": {\n      \"new_value\": {\n        \"chunks\": [\n          \"The Effects of Widgets on Gadgets\"\n        ]\n      },\n      \"old_value\": {\n        \"chunks\": [\n          \"The Effects of Widgets on Gadgets\",\n          \"Smith, J. (2020)\",\n          \"Abstract\",\n          \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n          \"We present experimental results and discuss implications for widget deployment.\"\n        ]\n      }\n    }\n  },\n  \"iterable_item_added\": {\n    \"root['paragraphs'][1]\": {\n      \"chunks\": [\n        \"Smith, J. (2020)\"\n      ]\n    },\n    \"root['paragraphs'][2]\": {\n      \"chunks\": [\n        \"Abstract\",\n        \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n        \"We present experimental results and discuss implications for widget deployment.\"\n      ]\n    }\n  }\n}\n    ```\n    \n\u274c Run 2/5 - Strict Comparisons\n    ```\n    Fields with differences with expected: {\n  \"values_changed\": {\n    \"root['paragraphs'][0]\": {\n      \"new_value\": {\n        \"chunks\": [\n          \"The Effects of Widgets on Gadgets\"\n        ]\n      },\n      \"old_value\": {\n        \"chunks\": [\n          \"The Effects of Widgets on Gadgets\",\n          \"Smith, J. (2020)\",\n          \"Abstract\",\n          \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n          \"We present experimental results and discuss implications for widget deployment.\"\n        ]\n      }\n    }\n  },\n  \"iterable_item_added\": {\n    \"root['paragraphs'][1]\": {\n      \"chunks\": [\n        \"Smith, J. (2020)\"\n      ]\n    },\n    \"root['paragraphs'][2]\": {\n      \"chunks\": [\n        \"Abstract\",\n        \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n        \"We present experimental results and discuss implications for widget deployment.\"\n      ]\n    }\n  }\n}\n    ```\n    \n\u274c Run 3/5 - Strict Comparisons\n    ```\n    Fields with differences with expected: {\n  \"values_changed\": {\n    \"root['paragraphs'][0]\": {\n      \"new_value\": {\n        \"chunks\": [\n          \"The Effects of Widgets on Gadgets\"\n        ]\n      },\n      \"old_value\": {\n        \"chunks\": [\n          \"The Effects of Widgets on Gadgets\",\n          \"Smith, J. (2020)\",\n          \"Abstract\",\n          \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n          \"We present experimental results and discuss implications for widget deployment.\"\n        ]\n      }\n    }\n  },\n  \"iterable_item_added\": {\n    \"root['paragraphs'][1]\": {\n      \"chunks\": [\n        \"Smith, J. (2020)\"\n      ]\n    },\n    \"root['paragraphs'][2]\": {\n      \"chunks\": [\n        \"Abstract\",\n        \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n        \"We present experimental results and discuss implications for widget deployment.\"\n      ]\n    }\n  }\n}\n    ```\n    \n\u274c Run 4/5 - Strict Comparisons\n    ```\n    Fields with differences with expected: {\n  \"values_changed\": {\n    \"root['paragraphs'][0]\": {\n      \"new_value\": {\n        \"chunks\": [\n          \"The Effects of Widgets on Gadgets\"\n        ]\n      },\n      \"old_value\": {\n        \"chunks\": [\n          \"The Effects of Widgets on Gadgets\",\n          \"Smith, J. (2020)\",\n          \"Abstract\",\n          \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n          \"We present experimental results and discuss implications for widget deployment.\"\n        ]\n      }\n    }\n  },\n  \"iterable_item_added\": {\n    \"root['paragraphs'][1]\": {\n      \"chunks\": [\n        \"Smith, J. (2020)\"\n      ]\n    },\n    \"root['paragraphs'][2]\": {\n      \"chunks\": [\n        \"Abstract\"\n      ]\n    },\n    \"root['paragraphs'][3]\": {\n      \"chunks\": [\n        \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n        \" We present experimental results and discuss implications for widget deployment.\"\n      ]\n    }\n  }\n}\n    ```\n    \n\u274c Run 5/5 - Strict Comparisons\n    ```\n    Fields with differences with expected: {\n  \"values_changed\": {\n    \"root['paragraphs'][0]\": {\n      \"new_value\": {\n        \"chunks\": [\n          \"The Effects of Widgets on Gadgets\"\n        ]\n      },\n      \"old_value\": {\n        \"chunks\": [\n          \"The Effects of Widgets on Gadgets\",\n          \"Smith, J. (2020)\",\n          \"Abstract\",\n          \"This paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n          \"We present experimental results and discuss implications for widget deployment.\"\n        ]\n      }\n    }\n  },\n  \"iterable_item_added\": {\n    \"root['paragraphs'][1]\": {\n      \"chunks\": [\n        \"Smith, J. (2020)\"\n      ]\n    },\n    \"root['paragraphs'][2]\": {\n      \"chunks\": [\n        \"Abstract\\nThis paper investigates the impact of widgets on various gadget performance characteristics including throughput and latency.\",\n        \"We present experimental results and discuss implications for widget deployment.\"\n      ]\n    }\n  }\n}\n    ```\n    \n\u274c 0% (0/5) of runs passed LLM Comparisons\n\u274c Run 1/5 - LLM Comparisons\n    ```\n    Paragraph count differs (expected 1 paragraph with all chunks vs received 3 paragraphs). Despite matching chunk content overall, differing list counts cause a fail.\n    ```\n    \n\u274c Run 2/5 - LLM Comparisons\n    ```\n    Paragraphs list count differs (expected 1 paragraph, received 3). Although chunk content matches, the structure does not, so it fails.\n    ```\n    \n\u274c Run 3/5 - LLM Comparisons\n    ```\n    Paragraph counts differ (expected 1 paragraph with all 5 chunks; received 3 separate paragraphs). Even if all chunk texts are present, the list-length mismatch fails the comparison.\n    ```\n    \n\u274c Run 4/5 - LLM Comparisons\n    ```\n    Counts differ in the list-like 'paragraphs' field: expected 1 paragraph with 5 chunks; received 4 separate paragraphs. Despite matching chunk texts, the structure does not match, so it fails.\n    ```\n    \n\u274c Run 5/5 - LLM Comparisons\n    ```\n    Paragraph count differs (expected 1 vs received 3). Also the expected standalone chunk 'Abstract' is missing\u2014it's merged with the next sentence\u2014so the chunk count (5 expected vs 4 received) and items do not match.\n    ```\n    "
        }
      }
    },
    {
      "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_basic]",
      "lineno": 75,
      "outcome": "passed",
      "keywords": [
        "test_reference_extractor_agent_cases[reference_case_basic]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "reference_case_basic",
        "test_reference_extractor.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0006220000213943422,
        "outcome": "passed"
      },
      "call": {
        "duration": 15.551548916962929,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0006824579904787242,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "reference_case_basic",
        "agent": {
          "name": "Reference Extractor",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "# Effects of Widgets on System Performance\n\nThis study explores how widgets impact overall gadget performance metrics.\n\n## Introduction\nWidgets have been widely adopted across industries. Prior work s...",
          "supporting_documents": "### Supporting document #1 (index: 1)\n\nFile name: supporting_1.md\nFile content converted to markdown (truncated):\n```markdown\nThe Effects of Widgets on Gadgets\n\nSmith, J. (2020)\n\nAbstract\nThis paper i..."
        },
        "expected_output": {
          "references": [
            {
              "text": "Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 1,
              "name_of_associated_supporting_document": "supporting_1.md"
            },
            {
              "text": "Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 2,
              "name_of_associated_supporting_document": "supporting_2.md"
            },
            {
              "text": "Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech.",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 3,
              "name_of_associated_supporting_document": "supporting_3.md"
            }
          ]
        },
        "actual_outputs": [
          {
            "references": [
              {
                "text": "Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 1,
                "name_of_associated_supporting_document": "supporting_1.md"
              },
              {
                "text": "Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 2,
                "name_of_associated_supporting_document": "supporting_2.md"
              },
              {
                "text": "Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech.",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 3,
                "name_of_associated_supporting_document": "supporting_3.md"
              }
            ]
          }
        ],
        "evaluation_config": {
          "strict_fields": {
            "references": {
              "__all__": "{'text', 'has_associated_supporting_document', 'name_of_associated_supporting_document', 'index_of_associated_supporting_document'}"
            }
          },
          "llm_fields": [],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\nNo fields require llm comparison"
        }
      }
    },
    {
      "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_missing_support]",
      "lineno": 75,
      "outcome": "passed",
      "keywords": [
        "test_reference_extractor_agent_cases[reference_case_missing_support]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "reference_case_missing_support",
        "test_reference_extractor.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.00038016604958102107,
        "outcome": "passed"
      },
      "call": {
        "duration": 15.551683374971617,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0006645839894190431,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "reference_case_missing_support",
        "agent": {
          "name": "Reference Extractor",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "# Effects of Widgets on System Performance\n\nThis study explores how widgets impact overall gadget performance metrics.\n\n## Introduction\nWidgets have been widely adopted across industries. Prior work s...",
          "supporting_documents": "### Supporting document #1 (index: 1)\n\nFile name: supporting_1.md\nFile content converted to markdown (truncated):\n```markdown\nThe Effects of Widgets on Gadgets\n\nSmith, J. (2020)\n\nAbstract\nThis paper i..."
        },
        "expected_output": {
          "references": [
            {
              "text": "Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 1,
              "name_of_associated_supporting_document": "supporting_1.md"
            },
            {
              "text": "Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
              "has_associated_supporting_document": false,
              "index_of_associated_supporting_document": -1,
              "name_of_associated_supporting_document": ""
            },
            {
              "text": "Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech.",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 2,
              "name_of_associated_supporting_document": "supporting_3.md"
            }
          ]
        },
        "actual_outputs": [
          {
            "references": [
              {
                "text": "Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 1,
                "name_of_associated_supporting_document": "supporting_1.md"
              },
              {
                "text": "Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
                "has_associated_supporting_document": false,
                "index_of_associated_supporting_document": -1,
                "name_of_associated_supporting_document": ""
              },
              {
                "text": "Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech.",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 2,
                "name_of_associated_supporting_document": "supporting_3.md"
              }
            ]
          }
        ],
        "evaluation_config": {
          "strict_fields": {
            "references": {
              "__all__": "{'text', 'has_associated_supporting_document', 'name_of_associated_supporting_document', 'index_of_associated_supporting_document'}"
            }
          },
          "llm_fields": [],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\nNo fields require llm comparison"
        }
      }
    },
    {
      "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_no_support]",
      "lineno": 75,
      "outcome": "passed",
      "keywords": [
        "test_reference_extractor_agent_cases[reference_case_no_support]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "reference_case_no_support",
        "test_reference_extractor.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0003958329907618463,
        "outcome": "passed"
      },
      "call": {
        "duration": 10.720541750022676,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0013662920100614429,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "reference_case_no_support",
        "agent": {
          "name": "Reference Extractor",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "# Effects of Widgets on System Performance\n\nThis study explores how widgets impact overall gadget performance metrics.\n\n## Introduction\nWidgets have been widely adopted across industries. Prior work s...",
          "supporting_documents": ""
        },
        "expected_output": {
          "references": [
            {
              "text": "Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
              "has_associated_supporting_document": false,
              "index_of_associated_supporting_document": -1,
              "name_of_associated_supporting_document": ""
            },
            {
              "text": "Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
              "has_associated_supporting_document": false,
              "index_of_associated_supporting_document": -1,
              "name_of_associated_supporting_document": ""
            },
            {
              "text": "Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech.",
              "has_associated_supporting_document": false,
              "index_of_associated_supporting_document": -1,
              "name_of_associated_supporting_document": ""
            }
          ]
        },
        "actual_outputs": [
          {
            "references": [
              {
                "text": "Smith, J. (2020). The Effects of Widgets on Gadgets. Journal of Widgetry.",
                "has_associated_supporting_document": false,
                "index_of_associated_supporting_document": -1,
                "name_of_associated_supporting_document": ""
              },
              {
                "text": "Doe, A.; Roe, B. (2019). A Comprehensive Study of Gizmos. Proceedings of Gizmo Conf.",
                "has_associated_supporting_document": false,
                "index_of_associated_supporting_document": -1,
                "name_of_associated_supporting_document": ""
              },
              {
                "text": "Smith, A.; Anderson, T. (2017), A Study of The Effect of Cellphones on Writing Ability. Journal of Big Tech.",
                "has_associated_supporting_document": false,
                "index_of_associated_supporting_document": -1,
                "name_of_associated_supporting_document": ""
              }
            ]
          }
        ],
        "evaluation_config": {
          "strict_fields": {
            "references": {
              "__all__": "{'text', 'has_associated_supporting_document', 'name_of_associated_supporting_document', 'index_of_associated_supporting_document'}"
            }
          },
          "llm_fields": [],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\nNo fields require llm comparison"
        }
      }
    },
    {
      "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_criminal_justice_all_support]",
      "lineno": 75,
      "outcome": "passed",
      "keywords": [
        "test_reference_extractor_agent_cases[reference_case_criminal_justice_all_support]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "reference_case_criminal_justice_all_support",
        "test_reference_extractor.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0006572089623659849,
        "outcome": "passed"
      },
      "call": {
        "duration": 30.960191792051774,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0011102919816039503,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "reference_case_criminal_justice_all_support",
        "agent": {
          "name": "Reference Extractor",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "## Introduction\n\nThe criminal justice system in the United States is intended to deter, punish, and reform individuals who violate the norms of good order and mutual respect that are enshrined in law....",
          "supporting_documents": "### Supporting document #1 (index: 1)\n\nFile name: ref1.pdf\nFile content converted to markdown (truncated):\n```markdown\n9/18/25, 10:33 AM\n\nOf\ufb01ce of Public Affairs | Assistant Attorney General Leslie R...."
        },
        "expected_output": {
          "references": [
            {
              "text": "Caldwell, Leslie R., \u201cAssistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\u201d U.S. Department of Justice, May 12, 2016.",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 1,
              "name_of_associated_supporting_document": "ref1.pdf"
            },
            {
              "text": "Hill, Jonah Force, \u201cProblematic Alternatives: MLAT Reform for the Digital Age,\u201d *Harvard Law School National Security Journal*, January 28, 2015.",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 2,
              "name_of_associated_supporting_document": "ref2.pdf"
            },
            {
              "text": "Goodison, Sean E., Robert C. Davis, and Brian A. Jackson, *Digital Evidence and the U.S. Criminal Justice System: Identifying Technology and Other Needs to More Effectively Acquire and Utilize Digital Evidence*, Santa Monica, Calif.: RAND Corporation, RR-890-NIJ, 2015. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR890.html",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 3,
              "name_of_associated_supporting_document": "ref3.pdf"
            },
            {
              "text": "Goodison, Sean E., Dulani Woods, Jeremy D. Barnum, Adam R. Kemerer, and Brian A. Jackson, *Identifying Law Enforcement Needs for Conducting Criminal Investigations Involving Evidence on the Dark Web*, Santa Monica, Calif.: RAND Corporation, RR-2704-NIJ, 2019. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR2704.html",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 4,
              "name_of_associated_supporting_document": "ref4.pdf"
            },
            {
              "text": "Tanneeru, Manav, \u201cCan the Law Keep Up with Technology?\u201d CNN, November 17, 2009.",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 5,
              "name_of_associated_supporting_document": "ref5.pdf"
            },
            {
              "text": "Vermeer, Michael J. D., Dulani Woods, and Brian A. Jackson, *Identifying Law Enforcement Needs for Access to Digital Evidence in Remote Data Centers*, Santa Monica, Calif.: RAND Corporation, RR-2240-NIJ, 2018. As of November 16, 2022: https://www.rand.org/pubs/research_reports/RR2240.html",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 6,
              "name_of_associated_supporting_document": "ref6.pdf"
            }
          ]
        },
        "actual_outputs": [
          {
            "references": [
              {
                "text": "Caldwell, Leslie R., \u201cAssistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\u201d U.S. Department of Justice, May 12, 2016.",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 1,
                "name_of_associated_supporting_document": "ref1.pdf"
              },
              {
                "text": "Hill, Jonah Force, \u201cProblematic Alternatives: MLAT Reform for the Digital Age,\u201d *Harvard Law School National Security Journal*, January 28, 2015.",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 2,
                "name_of_associated_supporting_document": "ref2.pdf"
              },
              {
                "text": "Goodison, Sean E., Robert C. Davis, and Brian A. Jackson, *Digital Evidence and the U.S. Criminal Justice System: Identifying Technology and Other Needs to More Effectively Acquire and Utilize Digital Evidence*, Santa Monica, Calif.: RAND Corporation, RR-890-NIJ, 2015. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR890.html",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 3,
                "name_of_associated_supporting_document": "ref3.pdf"
              },
              {
                "text": "Goodison, Sean E., Dulani Woods, Jeremy D. Barnum, Adam R. Kemerer, and Brian A. Jackson, *Identifying Law Enforcement Needs for Conducting Criminal Investigations Involving Evidence on the Dark Web*, Santa Monica, Calif.: RAND Corporation, RR-2704-NIJ, 2019. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR2704.html",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 4,
                "name_of_associated_supporting_document": "ref4.pdf"
              },
              {
                "text": "Tanneeru, Manav, \u201cCan the Law Keep Up with Technology?\u201d CNN, November 17, 2009.",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 5,
                "name_of_associated_supporting_document": "ref5.pdf"
              },
              {
                "text": "Vermeer, Michael J. D., Dulani Woods, and Brian A. Jackson, *Identifying Law Enforcement Needs for Access to Digital Evidence in Remote Data Centers*, Santa Monica, Calif.: RAND Corporation, RR-2240-NIJ, 2018. As of November 16, 2022: https://www.rand.org/pubs/research_reports/RR2240.html",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 6,
                "name_of_associated_supporting_document": "ref6.pdf"
              }
            ]
          }
        ],
        "evaluation_config": {
          "strict_fields": {
            "references": {
              "__all__": "{'text', 'has_associated_supporting_document', 'name_of_associated_supporting_document', 'index_of_associated_supporting_document'}"
            }
          },
          "llm_fields": [],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\nNo fields require llm comparison"
        }
      }
    },
    {
      "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_criminal_justice_all_support_docx]",
      "lineno": 75,
      "outcome": "failed",
      "keywords": [
        "test_reference_extractor_agent_cases[reference_case_criminal_justice_all_support_docx]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "reference_case_criminal_justice_all_support_docx",
        "test_reference_extractor.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0004963329993188381,
        "outcome": "passed"
      },
      "call": {
        "duration": 25.025677292025648,
        "outcome": "failed",
        "crash": {
          "path": "/Users/ricardoschieck/repos/AE Studio/Rand/rand-ai-reviewer/tests/llm/test_reference_extractor.py",
          "lineno": 85,
          "message": "AssertionError: reference_case_criminal_justice_all_support_docx: \u274c 0% (0/1) of runs passed Strict Comparisons\n  \u274c Run 1/1 - Strict Comparisons\n      ```\n      Fields with differences with expected: {\n    \"values_changed\": {\n      \"root['references'][0]['text']\": {\n        \"new_value\": \"Caldwell, Leslie R., \\\"Assistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\\\" U.S. Department of Justice, May 12, 2016.\",\n        \"old_value\": \"Caldwell, Leslie R., \\u201cAssistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\\u201d U.S. Department of Justice, May 12, 2016.\"\n      },\n      \"root['references'][1]['text']\": {\n        \"new_value\": \"Hill, Jonah Force, \\\"Problematic Alternatives: MLAT Reform for the Digital Age,\\\" *Harvard Law School National Security Journal*, January 28, 2015.\",\n        \"old_value\": \"Hill, Jonah Force, \\u201cProblematic Alternatives: MLAT Reform for the Digital Age,\\u201d *Harvard Law School National Security Journal*, January 28, 2015.\"\n      },\n      \"root['references'][4]['text']\": {\n        \"new_value\": \"Tanneeru, Manav, \\\"Can the Law Keep Up with Technology?\\\" CNN, November 17, 2009.\",\n        \"old_value\": \"Tanneeru, Manav, \\u201cCan the Law Keep Up with Technology?\\u201d CNN, November 17, 2009.\"\n      }\n    }\n  }\n      ```\n      \n  No fields require llm comparison\nassert False\n +  where False = EvaluationResult(passed=False, rationale='\u274c 0% (0/1) of runs passed Strict Comparisons\\n\u274c Run 1/1 - Strict Comparisons\\n    ```\\n    Fields with differences with expected: {\\n  \"values_changed\": {\\n    \"root[\\'references\\'][0][\\'text\\']\": {\\n      \"new_value\": \"Caldwell, Leslie R., \\\\\"Assistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\\\\\" U.S. Department of Justice, May 12, 2016.\",\\n      \"old_value\": \"Caldwell, Leslie R., \\\\u201cAssistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\\\\u201d U.S. Department of Justice, May 12, 2016.\"\\n    },\\n    \"root[\\'references\\'][1][\\'text\\']\": {\\n      \"new_value\": \"Hill, Jonah Force, \\\\\"Problematic Alternatives: MLAT Reform for the Digital Age,\\\\\" *Harvard Law School National Security Journal*, January 28, 2015.\",\\n      \"old_value\": \"Hill, Jonah Force, \\\\u201cProblematic Alternatives: MLAT Reform for the Digital Age,\\\\u201d *Harvard Law School National Security Journal*, January 28, 2015.\"\\n    },\\n    \"root[\\'references\\'][4][\\'text\\']\": {\\n      \"new_value\": \"Tanneeru, Manav, \\\\\"Can the Law Keep Up with Technology?\\\\\" CNN, November 17, 2009.\",\\n      \"old_value\": \"Tanneeru, Manav, \\\\u201cCan the Law Keep Up with Technology?\\\\u201d CNN, November 17, 2009.\"\\n    }\\n  }\\n}\\n    ```\\n    \\nNo fields require llm comparison').passed"
        },
        "traceback": [
          {
            "path": "tests/llm/test_reference_extractor.py",
            "lineno": 85,
            "message": "AssertionError"
          }
        ],
        "longrepr": "case = AgentTestCase(name='reference_case_criminal_justice_all_support_docx', agent=<Agent(id=None, name='Reference Extractor...', 'index_of_associated_supporting_document'}}}, llm_fields=set(), ignore_fields=set(), evaluator_model='openai:gpt-5')\n\n    @pytest.mark.asyncio\n    @pytest.mark.parametrize(\"case\", _build_cases(), ids=lambda case: case.name)\n    async def test_reference_extractor_agent_cases(case: AgentTestCase):\n        await case.run()\n        eval_result = await case.compare_results()\n    \n        # Store eval_result for reporting\n        case._eval_result = eval_result\n    \n>       assert eval_result.passed, f\"{case.name}: {eval_result.rationale}\"\nE       AssertionError: reference_case_criminal_justice_all_support_docx: \u274c 0% (0/1) of runs passed Strict Comparisons\nE         \u274c Run 1/1 - Strict Comparisons\nE             ```\nE             Fields with differences with expected: {\nE           \"values_changed\": {\nE             \"root['references'][0]['text']\": {\nE               \"new_value\": \"Caldwell, Leslie R., \\\"Assistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\\\" U.S. Department of Justice, May 12, 2016.\",\nE               \"old_value\": \"Caldwell, Leslie R., \\u201cAssistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\\u201d U.S. Department of Justice, May 12, 2016.\"\nE             },\nE             \"root['references'][1]['text']\": {\nE               \"new_value\": \"Hill, Jonah Force, \\\"Problematic Alternatives: MLAT Reform for the Digital Age,\\\" *Harvard Law School National Security Journal*, January 28, 2015.\",\nE               \"old_value\": \"Hill, Jonah Force, \\u201cProblematic Alternatives: MLAT Reform for the Digital Age,\\u201d *Harvard Law School National Security Journal*, January 28, 2015.\"\nE             },\nE             \"root['references'][4]['text']\": {\nE               \"new_value\": \"Tanneeru, Manav, \\\"Can the Law Keep Up with Technology?\\\" CNN, November 17, 2009.\",\nE               \"old_value\": \"Tanneeru, Manav, \\u201cCan the Law Keep Up with Technology?\\u201d CNN, November 17, 2009.\"\nE             }\nE           }\nE         }\nE             ```\nE             \nE         No fields require llm comparison\nE       assert False\nE        +  where False = EvaluationResult(passed=False, rationale='\u274c 0% (0/1) of runs passed Strict Comparisons\\n\u274c Run 1/1 - Strict Comparisons\\n    ```\\n    Fields with differences with expected: {\\n  \"values_changed\": {\\n    \"root[\\'references\\'][0][\\'text\\']\": {\\n      \"new_value\": \"Caldwell, Leslie R., \\\\\"Assistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\\\\\" U.S. Department of Justice, May 12, 2016.\",\\n      \"old_value\": \"Caldwell, Leslie R., \\\\u201cAssistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\\\\u201d U.S. Department of Justice, May 12, 2016.\"\\n    },\\n    \"root[\\'references\\'][1][\\'text\\']\": {\\n      \"new_value\": \"Hill, Jonah Force, \\\\\"Problematic Alternatives: MLAT Reform for the Digital Age,\\\\\" *Harvard Law School National Security Journal*, January 28, 2015.\",\\n      \"old_value\": \"Hill, Jonah Force, \\\\u201cProblematic Alternatives: MLAT Reform for the Digital Age,\\\\u201d *Harvard Law School National Security Journal*, January 28, 2015.\"\\n    },\\n    \"root[\\'references\\'][4][\\'text\\']\": {\\n      \"new_value\": \"Tanneeru, Manav, \\\\\"Can the Law Keep Up with Technology?\\\\\" CNN, November 17, 2009.\",\\n      \"old_value\": \"Tanneeru, Manav, \\\\u201cCan the Law Keep Up with Technology?\\\\u201d CNN, November 17, 2009.\"\\n    }\\n  }\\n}\\n    ```\\n    \\nNo fields require llm comparison').passed\n\ntests/llm/test_reference_extractor.py:85: AssertionError"
      },
      "teardown": {
        "duration": 0.0005737500032410026,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "reference_case_criminal_justice_all_support_docx",
        "agent": {
          "name": "Reference Extractor",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "## Introduction\n\nThe criminal justice system in the United States is intended to deter, punish, and reform individuals who violate the norms of good order and mutual respect that are enshrined in law....",
          "supporting_documents": "### Supporting document #1 (index: 1)\n\nFile name: ref1.pdf\nFile content converted to markdown (truncated):\n```markdown\n9/18/25, 10:33 AM\n\nOf\ufb01ce of Public Affairs | Assistant Attorney General Leslie R...."
        },
        "expected_output": {
          "references": [
            {
              "text": "Caldwell, Leslie R., \u201cAssistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\u201d U.S. Department of Justice, May 12, 2016.",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 1,
              "name_of_associated_supporting_document": "ref1.pdf"
            },
            {
              "text": "Hill, Jonah Force, \u201cProblematic Alternatives: MLAT Reform for the Digital Age,\u201d *Harvard Law School National Security Journal*, January 28, 2015.",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 2,
              "name_of_associated_supporting_document": "ref2.pdf"
            },
            {
              "text": "Goodison, Sean E., Robert C. Davis, and Brian A. Jackson, *Digital Evidence and the U.S. Criminal Justice System: Identifying Technology and Other Needs to More Effectively Acquire and Utilize Digital Evidence*, Santa Monica, Calif.: RAND Corporation, RR-890-NIJ, 2015. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR890.html",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 3,
              "name_of_associated_supporting_document": "ref3.pdf"
            },
            {
              "text": "Goodison, Sean E., Dulani Woods, Jeremy D. Barnum, Adam R. Kemerer, and Brian A. Jackson, *Identifying Law Enforcement Needs for Conducting Criminal Investigations Involving Evidence on the Dark Web*, Santa Monica, Calif.: RAND Corporation, RR-2704-NIJ, 2019. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR2704.html",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 4,
              "name_of_associated_supporting_document": "ref4.pdf"
            },
            {
              "text": "Tanneeru, Manav, \u201cCan the Law Keep Up with Technology?\u201d CNN, November 17, 2009.",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 5,
              "name_of_associated_supporting_document": "ref5.pdf"
            },
            {
              "text": "Vermeer, Michael J. D., Dulani Woods, and Brian A. Jackson, *Identifying Law Enforcement Needs for Access to Digital Evidence in Remote Data Centers*, Santa Monica, Calif.: RAND Corporation, RR-2240-NIJ, 2018. As of November 16, 2022: https://www.rand.org/pubs/research_reports/RR2240.html",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 6,
              "name_of_associated_supporting_document": "ref6.pdf"
            }
          ]
        },
        "actual_outputs": [
          {
            "references": [
              {
                "text": "Caldwell, Leslie R., \"Assistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\" U.S. Department of Justice, May 12, 2016.",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 1,
                "name_of_associated_supporting_document": "ref1.pdf"
              },
              {
                "text": "Hill, Jonah Force, \"Problematic Alternatives: MLAT Reform for the Digital Age,\" *Harvard Law School National Security Journal*, January 28, 2015.",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 2,
                "name_of_associated_supporting_document": "ref2.pdf"
              },
              {
                "text": "Goodison, Sean E., Robert C. Davis, and Brian A. Jackson, *Digital Evidence and the U.S. Criminal Justice System: Identifying Technology and Other Needs to More Effectively Acquire and Utilize Digital Evidence*, Santa Monica, Calif.: RAND Corporation, RR-890-NIJ, 2015. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR890.html",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 3,
                "name_of_associated_supporting_document": "ref3.pdf"
              },
              {
                "text": "Goodison, Sean E., Dulani Woods, Jeremy D. Barnum, Adam R. Kemerer, and Brian A. Jackson, *Identifying Law Enforcement Needs for Conducting Criminal Investigations Involving Evidence on the Dark Web*, Santa Monica, Calif.: RAND Corporation, RR-2704-NIJ, 2019. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR2704.html",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 4,
                "name_of_associated_supporting_document": "ref4.pdf"
              },
              {
                "text": "Tanneeru, Manav, \"Can the Law Keep Up with Technology?\" CNN, November 17, 2009.",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 5,
                "name_of_associated_supporting_document": "ref5.pdf"
              },
              {
                "text": "Vermeer, Michael J. D., Dulani Woods, and Brian A. Jackson, *Identifying Law Enforcement Needs for Access to Digital Evidence in Remote Data Centers*, Santa Monica, Calif.: RAND Corporation, RR-2240-NIJ, 2018. As of November 16, 2022: https://www.rand.org/pubs/research_reports/RR2240.html",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 6,
                "name_of_associated_supporting_document": "ref6.pdf"
              }
            ]
          }
        ],
        "evaluation_config": {
          "strict_fields": {
            "references": {
              "__all__": "{'text', 'has_associated_supporting_document', 'name_of_associated_supporting_document', 'index_of_associated_supporting_document'}"
            }
          },
          "llm_fields": [],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": false,
          "rationale": "\u274c 0% (0/1) of runs passed Strict Comparisons\n\u274c Run 1/1 - Strict Comparisons\n    ```\n    Fields with differences with expected: {\n  \"values_changed\": {\n    \"root['references'][0]['text']\": {\n      \"new_value\": \"Caldwell, Leslie R., \\\"Assistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\\\" U.S. Department of Justice, May 12, 2016.\",\n      \"old_value\": \"Caldwell, Leslie R., \\u201cAssistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\\u201d U.S. Department of Justice, May 12, 2016.\"\n    },\n    \"root['references'][1]['text']\": {\n      \"new_value\": \"Hill, Jonah Force, \\\"Problematic Alternatives: MLAT Reform for the Digital Age,\\\" *Harvard Law School National Security Journal*, January 28, 2015.\",\n      \"old_value\": \"Hill, Jonah Force, \\u201cProblematic Alternatives: MLAT Reform for the Digital Age,\\u201d *Harvard Law School National Security Journal*, January 28, 2015.\"\n    },\n    \"root['references'][4]['text']\": {\n      \"new_value\": \"Tanneeru, Manav, \\\"Can the Law Keep Up with Technology?\\\" CNN, November 17, 2009.\",\n      \"old_value\": \"Tanneeru, Manav, \\u201cCan the Law Keep Up with Technology?\\u201d CNN, November 17, 2009.\"\n    }\n  }\n}\n    ```\n    \nNo fields require llm comparison"
        }
      }
    },
    {
      "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_criminal_justice_partial_support]",
      "lineno": 75,
      "outcome": "passed",
      "keywords": [
        "test_reference_extractor_agent_cases[reference_case_criminal_justice_partial_support]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "reference_case_criminal_justice_partial_support",
        "test_reference_extractor.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0003064170014113188,
        "outcome": "passed"
      },
      "call": {
        "duration": 39.269946458982304,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.0008759999764151871,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "reference_case_criminal_justice_partial_support",
        "agent": {
          "name": "Reference Extractor",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "## Introduction\n\nThe criminal justice system in the United States is intended to deter, punish, and reform individuals who violate the norms of good order and mutual respect that are enshrined in law....",
          "supporting_documents": "### Supporting document #1 (index: 1)\n\nFile name: ref1.pdf\nFile content converted to markdown (truncated):\n```markdown\n9/18/25, 10:33 AM\n\nOf\ufb01ce of Public Affairs | Assistant Attorney General Leslie R...."
        },
        "expected_output": {
          "references": [
            {
              "text": "Caldwell, Leslie R., \u201cAssistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\u201d U.S. Department of Justice, May 12, 2016.",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 1,
              "name_of_associated_supporting_document": "ref1.pdf"
            },
            {
              "text": "Hill, Jonah Force, \u201cProblematic Alternatives: MLAT Reform for the Digital Age,\u201d *Harvard Law School National Security Journal*, January 28, 2015.",
              "has_associated_supporting_document": false,
              "index_of_associated_supporting_document": -1,
              "name_of_associated_supporting_document": ""
            },
            {
              "text": "Goodison, Sean E., Robert C. Davis, and Brian A. Jackson, *Digital Evidence and the U.S. Criminal Justice System: Identifying Technology and Other Needs to More Effectively Acquire and Utilize Digital Evidence*, Santa Monica, Calif.: RAND Corporation, RR-890-NIJ, 2015. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR890.html",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 2,
              "name_of_associated_supporting_document": "ref3.pdf"
            },
            {
              "text": "Goodison, Sean E., Dulani Woods, Jeremy D. Barnum, Adam R. Kemerer, and Brian A. Jackson, *Identifying Law Enforcement Needs for Conducting Criminal Investigations Involving Evidence on the Dark Web*, Santa Monica, Calif.: RAND Corporation, RR-2704-NIJ, 2019. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR2704.html",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 3,
              "name_of_associated_supporting_document": "ref4.pdf"
            },
            {
              "text": "Tanneeru, Manav, \u201cCan the Law Keep Up with Technology?\u201d CNN, November 17, 2009.",
              "has_associated_supporting_document": false,
              "index_of_associated_supporting_document": -1,
              "name_of_associated_supporting_document": ""
            },
            {
              "text": "Vermeer, Michael J. D., Dulani Woods, and Brian A. Jackson, *Identifying Law Enforcement Needs for Access to Digital Evidence in Remote Data Centers*, Santa Monica, Calif.: RAND Corporation, RR-2240-NIJ, 2018. As of November 16, 2022: https://www.rand.org/pubs/research_reports/RR2240.html",
              "has_associated_supporting_document": true,
              "index_of_associated_supporting_document": 4,
              "name_of_associated_supporting_document": "ref6.pdf"
            }
          ]
        },
        "actual_outputs": [
          {
            "references": [
              {
                "text": "Caldwell, Leslie R., \u201cAssistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\u201d U.S. Department of Justice, May 12, 2016.",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 1,
                "name_of_associated_supporting_document": "ref1.pdf"
              },
              {
                "text": "Hill, Jonah Force, \u201cProblematic Alternatives: MLAT Reform for the Digital Age,\u201d *Harvard Law School National Security Journal*, January 28, 2015.",
                "has_associated_supporting_document": false,
                "index_of_associated_supporting_document": -1,
                "name_of_associated_supporting_document": ""
              },
              {
                "text": "Goodison, Sean E., Robert C. Davis, and Brian A. Jackson, *Digital Evidence and the U.S. Criminal Justice System: Identifying Technology and Other Needs to More Effectively Acquire and Utilize Digital Evidence*, Santa Monica, Calif.: RAND Corporation, RR-890-NIJ, 2015. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR890.html",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 2,
                "name_of_associated_supporting_document": "ref3.pdf"
              },
              {
                "text": "Goodison, Sean E., Dulani Woods, Jeremy D. Barnum, Adam R. Kemerer, and Brian A. Jackson, *Identifying Law Enforcement Needs for Conducting Criminal Investigations Involving Evidence on the Dark Web*, Santa Monica, Calif.: RAND Corporation, RR-2704-NIJ, 2019. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR2704.html",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 3,
                "name_of_associated_supporting_document": "ref4.pdf"
              },
              {
                "text": "Tanneeru, Manav, \u201cCan the Law Keep Up with Technology?\u201d CNN, November 17, 2009.",
                "has_associated_supporting_document": false,
                "index_of_associated_supporting_document": -1,
                "name_of_associated_supporting_document": ""
              },
              {
                "text": "Vermeer, Michael J. D., Dulani Woods, and Brian A. Jackson, *Identifying Law Enforcement Needs for Access to Digital Evidence in Remote Data Centers*, Santa Monica, Calif.: RAND Corporation, RR-2240-NIJ, 2018. As of November 16, 2022: https://www.rand.org/pubs/research_reports/RR2240.html",
                "has_associated_supporting_document": true,
                "index_of_associated_supporting_document": 4,
                "name_of_associated_supporting_document": "ref6.pdf"
              }
            ]
          }
        ],
        "evaluation_config": {
          "strict_fields": {
            "references": {
              "__all__": "{'text', 'has_associated_supporting_document', 'name_of_associated_supporting_document', 'index_of_associated_supporting_document'}"
            }
          },
          "llm_fields": [],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\nNo fields require llm comparison"
        }
      }
    },
    {
      "nodeid": "tests/llm/test_reference_extractor.py::test_reference_extractor_agent_cases[reference_case_criminal_justice_no_support]",
      "lineno": 75,
      "outcome": "passed",
      "keywords": [
        "test_reference_extractor_agent_cases[reference_case_criminal_justice_no_support]",
        "parametrize",
        "asyncio",
        "pytestmark",
        "reference_case_criminal_justice_no_support",
        "test_reference_extractor.py",
        "llm",
        "tests",
        "rand-ai-reviewer",
        ""
      ],
      "setup": {
        "duration": 0.0004959999932907522,
        "outcome": "passed"
      },
      "call": {
        "duration": 25.38456708297599,
        "outcome": "passed"
      },
      "teardown": {
        "duration": 0.00120599998626858,
        "outcome": "passed"
      },
      "agent_test_case": {
        "name": "reference_case_criminal_justice_no_support",
        "agent": {
          "name": "Reference Extractor",
          "version": null
        },
        "prompt_kwargs": {
          "full_document": "## Introduction\n\nThe criminal justice system in the United States is intended to deter, punish, and reform individuals who violate the norms of good order and mutual respect that are enshrined in law....",
          "supporting_documents": ""
        },
        "expected_output": {
          "references": [
            {
              "text": "Caldwell, Leslie R., \u201cAssistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\u201d U.S. Department of Justice, May 12, 2016.",
              "has_associated_supporting_document": false,
              "index_of_associated_supporting_document": -1,
              "name_of_associated_supporting_document": ""
            },
            {
              "text": "Hill, Jonah Force, \u201cProblematic Alternatives: MLAT Reform for the Digital Age,\u201d *Harvard Law School National Security Journal*, January 28, 2015.",
              "has_associated_supporting_document": false,
              "index_of_associated_supporting_document": -1,
              "name_of_associated_supporting_document": ""
            },
            {
              "text": "Goodison, Sean E., Robert C. Davis, and Brian A. Jackson, *Digital Evidence and the U.S. Criminal Justice System: Identifying Technology and Other Needs to More Effectively Acquire and Utilize Digital Evidence*, Santa Monica, Calif.: RAND Corporation, RR-890-NIJ, 2015. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR890.html",
              "has_associated_supporting_document": false,
              "index_of_associated_supporting_document": -1,
              "name_of_associated_supporting_document": ""
            },
            {
              "text": "Goodison, Sean E., Dulani Woods, Jeremy D. Barnum, Adam R. Kemerer, and Brian A. Jackson, *Identifying Law Enforcement Needs for Conducting Criminal Investigations Involving Evidence on the Dark Web*, Santa Monica, Calif.: RAND Corporation, RR-2704-NIJ, 2019. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR2704.html",
              "has_associated_supporting_document": false,
              "index_of_associated_supporting_document": -1,
              "name_of_associated_supporting_document": ""
            },
            {
              "text": "Tanneeru, Manav, \u201cCan the Law Keep Up with Technology?\u201d CNN, November 17, 2009.",
              "has_associated_supporting_document": false,
              "index_of_associated_supporting_document": -1,
              "name_of_associated_supporting_document": ""
            },
            {
              "text": "Vermeer, Michael J. D., Dulani Woods, and Brian A. Jackson, *Identifying Law Enforcement Needs for Access to Digital Evidence in Remote Data Centers*, Santa Monica, Calif.: RAND Corporation, RR-2240-NIJ, 2018. As of November 16, 2022: https://www.rand.org/pubs/research_reports/RR2240.html",
              "has_associated_supporting_document": false,
              "index_of_associated_supporting_document": -1,
              "name_of_associated_supporting_document": ""
            }
          ]
        },
        "actual_outputs": [
          {
            "references": [
              {
                "text": "Caldwell, Leslie R., \u201cAssistant Attorney General Leslie R. Caldwell Delivers Remarks at the Securities Enforcement Forum West Conference,\u201d U.S. Department of Justice, May 12, 2016.",
                "has_associated_supporting_document": false,
                "index_of_associated_supporting_document": -1,
                "name_of_associated_supporting_document": ""
              },
              {
                "text": "Hill, Jonah Force, \u201cProblematic Alternatives: MLAT Reform for the Digital Age,\u201d *Harvard Law School National Security Journal*, January 28, 2015.",
                "has_associated_supporting_document": false,
                "index_of_associated_supporting_document": -1,
                "name_of_associated_supporting_document": ""
              },
              {
                "text": "Goodison, Sean E., Robert C. Davis, and Brian A. Jackson, *Digital Evidence and the U.S. Criminal Justice System: Identifying Technology and Other Needs to More Effectively Acquire and Utilize Digital Evidence*, Santa Monica, Calif.: RAND Corporation, RR-890-NIJ, 2015. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR890.html",
                "has_associated_supporting_document": false,
                "index_of_associated_supporting_document": -1,
                "name_of_associated_supporting_document": ""
              },
              {
                "text": "Goodison, Sean E., Dulani Woods, Jeremy D. Barnum, Adam R. Kemerer, and Brian A. Jackson, *Identifying Law Enforcement Needs for Conducting Criminal Investigations Involving Evidence on the Dark Web*, Santa Monica, Calif.: RAND Corporation, RR-2704-NIJ, 2019. As of November 15, 2022: https://www.rand.org/pubs/research_reports/RR2704.html",
                "has_associated_supporting_document": false,
                "index_of_associated_supporting_document": -1,
                "name_of_associated_supporting_document": ""
              },
              {
                "text": "Tanneeru, Manav, \u201cCan the Law Keep Up with Technology?\u201d CNN, November 17, 2009.",
                "has_associated_supporting_document": false,
                "index_of_associated_supporting_document": -1,
                "name_of_associated_supporting_document": ""
              },
              {
                "text": "Vermeer, Michael J. D., Dulani Woods, and Brian A. Jackson, *Identifying Law Enforcement Needs for Access to Digital Evidence in Remote Data Centers*, Santa Monica, Calif.: RAND Corporation, RR-2240-NIJ, 2018. As of November 16, 2022: https://www.rand.org/pubs/research_reports/RR2240.html",
                "has_associated_supporting_document": false,
                "index_of_associated_supporting_document": -1,
                "name_of_associated_supporting_document": ""
              }
            ]
          }
        ],
        "evaluation_config": {
          "strict_fields": {
            "references": {
              "__all__": "{'text', 'has_associated_supporting_document', 'name_of_associated_supporting_document', 'index_of_associated_supporting_document'}"
            }
          },
          "llm_fields": [],
          "evaluator_model": "openai:gpt-5",
          "run_count": 1
        },
        "evaluation_result": {
          "passed": true,
          "rationale": "\u2705 100% (1/1) of runs passed Strict Comparisons\nNo fields require llm comparison"
        }
      }
    }
  ],
  "warnings": [
    {
      "message": "Couldn't find ffmpeg or avconv - defaulting to ffmpeg, but may not work",
      "category": "RuntimeWarning",
      "when": "config",
      "filename": "/Users/ricardoschieck/repos/AE Studio/Rand/rand-ai-reviewer/.venv/lib/python3.13/site-packages/pydub/utils.py",
      "lineno": 170
    }
  ]
}